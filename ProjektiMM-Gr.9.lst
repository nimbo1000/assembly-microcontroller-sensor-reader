ProjektiMM-Gr.9                                                                                                         PAGE 1
                         1      ;_______________________________________________________________________________________;
                         2     ;               Fakulteti i Inxhinierise Elektrike dhe Kompjuterike                     ;
                         3     ;                       Mikroprocesoret dhe Mikrokontrolleret                           ;
                         4     ;           Regjistrimi i karakteristikave te elementeve ne temperatura te ndryshme     ;
                         5     ;_______________________________________________________________________________________;
                         6
  0019                   7     Display_Status  EQU     19h
                         8
  00B3                   9     bustherm equ p3.3
                        10
  005D                  11     crcpolynom1wire equ 5dh
  005E                  12     crc equ 5eh
                        13
  00B1                  14     Button_Next     BIT     P3.1
  00B2                  15     Button_OK       BIT     P3.2
  00B3                  16     Button_ESC      BIT     P3.3
                        17
  00A0                  18     Button_0_7      EQU     P2
  00A0                  19     Button_0        BIT     P2.0
  00A1                  20     Button_1        BIT     P2.1
  00A2                  21     Button_2        BIT     P2.2
  00A3                  22     Button_3        BIT     P2.3
  00A4                  23     Button_4        BIT     P2.4
  00A5                  24     Button_5        BIT     P2.5
  00A6                  25     Button_6        BIT     P2.6
  00A7                  26     Button_7        BIT     P2.7
  00B7                  27     Button_8        BIT     P3.7
  00B6                  28     Button_9        BIT     P3.6
                        29
  0097                  30     clk             equ     p1.7
  0096                  31     sdo             equ     p1.6
  0095                  32     sdi             equ     p1.5
  00B5                  33     cs              equ     p3.5
  00B4                  34     csDA            equ     p3.4
                        35
  0037                  36     DIS_0           EQU     37H
  0038                  37     DIS_1           EQU     38H
  0039                  38     DIS_2           EQU     39H
  003A                  39     DIS_3           EQU     3AH
                        40
  003B                  41     DATA_BANK       EQU     3BH
                        42
  003C                  43     Mijeshet        EQU     3CH
  003D                  44     Qindeshet       EQU     3DH
  003E                  45     Dhjeteshet      EQU     3EH
  003F                  46     Njeshet         EQU     3FH
  0040                  47     Vlera7SegH      EQU     40h
  0041                  48     Vlera7Seg       EQU     41h
                        49
  0042                  50     DAh             equ     42h
  0043                  51     DAl             equ     43h
  0044                  52     ADh             equ     44h
  0045                  53     ADl             equ     45h
  0046                  54     temp            equ     46h
                        55
  0047                  56     C0              EQU     47H
  0048                  57     C1              EQU     48H
  0049                  58     C2              EQU     49H
  004A                  59     C3              EQU     4aH
                        60
  0055                  61     P1_GJT          EQU     55H
  0056                  62     P1_GJP          EQU     56H
                        63
  0057                  64     Kanali          EQU     57H
                        65
  0059                  66     GjendjaDergimit         EQU     59H
  005A                  67     GjendjaModbus           EQU     5AH
  005B                  68     CounterModbus           EQU     5BH
                        69
  0071                  70     AD0H            EQU     71h
  0072                  71     AD0L            EQU     72h
                        72
                        73     ;MODBUS Slave for 8051
  0070                  74     StartAddress            EQU     70H
  0020                  75     ShareMemory             EQU     20H
  000D                  76     CRC_ACCUM_LOW           EQU     0DH             ;bank 1 regjistri R5
  000E                  77     CRC_ACCUM_HI            EQU     0EH             ;bank 1 regjistri R6
  0001                  78     CRC_MASK_LSB            EQU     001H            ;CRC-16 polinomi
  00A0                  79     CRC_MASK_MSB            EQU     0A0H
  0020                  80     COIL_ADDR               EQU     20H
  0020                  81     INP_ADDR                EQU     20H
  0020                  82     HREG_ADDR               EQU     20H
  0020                  83     IREG_ADDR               EQU     20H
  0020                  84     HREGNUM                 EQU     20H             ;NumriTotal i Regjistrave
  0020                  85     IREGNUM                 EQU     20H
  0080                  86     INPNUM                  EQU     128
  0080                  87     COILNUM                 EQU     128             ;numri total i coilave
                        88
  F949                  89     t15                     EQU     63817           ;65536-1719 , 11bit/9600*1.5=63817
  F056                  90     t35                     EQU     61526           ;65536-4010 =61526
  3C06                  91     t20                     EQU     15366
                        92
                        93             ORG 00H
0000 020030             94                     LJMP MAIN
                        95             ORG 0BH
000B 020C9C             96                     LJMP TMR0VEC
                        97             ORG 1BH
001B 020368             98                     LJMP Interrupt_7seg
                        99             ORG 23H
0023 020CF7            100                     LJMP SERVEC
                       101             ORG 30H
                       102     ;-----------------------------------------------------------------------------------------------
                       103     MAIN:
0030 755500            104             MOV P1_GJT , #00                        ;gjendjet fillestare per shfaqjen e displayve
0033 755600            105             MOV P1_GJP , #00
                       106
0036 7581B0            107             MOV SP , #0B0H                          ;Inicializimi i StackPointerit
0039 755A01            108             MOV GjendjaModbus , #01H
003C 755B00            109             MOV CounterModbus , #00H
003F 759850            110             MOV SCON,#50H                           ;TI=1, RI=0, REN=1
0042 75C834            111             MOV T2CON,#34H
0045 75CBFF            112             MOV RCAP2H,#0FFH
0048 75CAE6            113             MOV RCAP2L , #0E6H
004B D2CA              114             SETB TR2
004D 758921            115             MOV TMOD,#21H                           ;TIMER1: MOD2-AUTORELOAD, TIMER0: MOD1-16BIT
0050 758CF0            116             MOV TH0,#HIGH t35
0053 758A56            117             MOV TL0,#LOW t35
0056 758D58            118             MOV TH1 , #58H
0059 D28C              119             SETB TR0
005B D28E              120             SETB TR1
005D 75A882            121             MOV IE,#82H                             ;lejohet interapti i Timer0 dhe i Portit Serik
0060 D2A9              122             SETB ET0
0062 D2AC              123             SETB ES
0064 D2AB              124             SETB ET1
                       125
0066 754400            126             MOV ADH,#00h
0069 754500            127             MOV ADL,#00h
006C 757100            128             MOV AD0H,#00h
006F 757200            129             MOV AD0L,#00h
0072 754200            130             MOV DAH, #00h
0075 754300            131             MOV DAL, #00h
0078 754600            132             MOV temp, #00h
                       133
                       134
007B 751900            135             MOV Display_Status,#00H
                       136
007E 753C00            137             MOV mijeshet,#00H
0081 753D00            138             MOV Qindeshet,#00H
0084 753E00            139             MOV Dhjeteshet,#00H
0087 753F00            140             MOV Njeshet,#00H
                       141
008A 753B00            142             MOV DATA_BANK,#00H
                       143
008D 120343            144             LCALL   Delay_Max
                       145     ;----------------------------------------------------------------------------------------------------
                       146     Program:
0090 00                147             NOP
0091 020090            148     LJMP Program
                       149
                       150     ;----------------------------
                       151     ;vendos tensionin ne DAC dhe lexon tensionin ne ADC dhe temperaturen
                       152     ;----------------------------
                       153     Mat_vlerat:
0094 1200ED            154     lcall Write_DA
0097 120166            155     lcall read_AD
009A 1201FB            156     lcall read_AD0
009D 120290            157     lcall lexo_temp
00A0 22                158     ret
                       159
                       160     ;----------------------------
                       161     ;vendos ne DA 10 vlera te njepasnjeshme te tensionit prej 0-4V, dhe mat vlerat perkatese te tensionit
                       162     ;lexon temperaturen e ambientit ne te cilin gjenden elementet
                       163     ;thirret gjate komunikimit me PC permes portit Serik
                       164     ;----------------------------
                       165     Dergo_PC:
00A1 7F0A              166     mov r7,#10
00A3 754200            167     mov dah,#0
00A6 754300            168     mov dal,#0
00A9 7820              169     mov r0, #20h
                       170
                       171     prapa:
00AB 12032F            172     lcall Inc_400
00AE 1200ED            173     LCALL Write_da
                       174
00B1 120166            175     lcall read_ad
00B4 A644              176     mov @r0, adh
00B6 08                177     inc r0
00B7 A645              178     mov @r0, adl
                       179
                       180
00B9 08                181     inc r0
00BA DFEF              182     djnz r7, prapa
00BC 120290            183     lcall Lexo_Temp
00BF 856734            184     mov 34h, 67h
00C2 08                185     inc r0
00C3 856835            186     mov 35h, 68h
                       187
00C6 22                188     RET
                       189     ;----------------------------
                       190     Dergo_PC0:
                       191
00C7 7F0A              192     mov r7,#10
00C9 754200            193     mov dah,#0
00CC 754300            194     mov dal,#0
00CF 7820              195     mov r0, #20h
                       196
                       197     prapa0:
00D1 12032F            198     lcall Inc_400
00D4 1200ED            199     LCALL Write_da
                       200
00D7 1201FB            201     lcall read_ad0
00DA A671              202     mov @r0, ad0h
00DC 08                203     inc r0
00DD A672              204     mov @r0, ad0l
                       205
                       206
00DF 08                207     inc r0
00E0 DFEF              208     djnz r7, prapa0
00E2 120290            209     lcall Lexo_Temp
00E5 856734            210     mov 34h, 67h
00E8 08                211     inc r0
00E9 856835            212     mov 35h, 68h
                       213
00EC 22                214     RET
                       215     ;----------------------------
                       216     ;vendosja e vleres ne DA, varesisht prej vlerave ne DAh dhe DAl
                       217     ;----------------------------
                       218     Write_DA:
                       219
00ED C2B4              220     clr csDA
00EF C297              221     clr clk
00F1 E542              222     mov a,DAh
                       223     ;clr sdi ;bit0 - A/B
00F3 33                224     rlc a
00F4 9295              225     mov sdi,c
00F6 D297              226     setb clk
00F8 C297              227     clr clk
                       228     ;setb sdi ;bit1 - BUF
00FA 33                229     rlc a
00FB 9295              230     mov sdi,c
00FD D297              231     setb clk
00FF C297              232     clr clk
                       233     ;setb sdi ;bit2 - GAIN
0101 33                234     rlc a
0102 9295              235     mov sdi,c
0104 D297              236     setb clk
0106 C297              237     clr clk
                       238     ;setb sdi ;bit3 - SHDN
0108 33                239     rlc a
0109 9295              240     mov sdi,c
010B D297              241     setb clk
010D C297              242     clr clk
                       243
                       244     ;clr sdi ;bit4 - D11
010F 33                245     rlc a
0110 9295              246     mov sdi,c
0112 D297              247     setb clk
0114 C297              248     clr clk
                       249     ;setb sdi ;bit5 - D10
0116 33                250     rlc a
0117 9295              251     mov sdi,c
0119 D297              252     setb clk
011B C297              253     clr clk
                       254     ;clr sdi ;bit6 - D9
011D 33                255     rlc a
011E 9295              256     mov sdi,c
0120 D297              257     setb clk
0122 C297              258     clr clk
                       259     ;clr sdi ;bit7 - D8
0124 33                260     rlc a
0125 9295              261     mov sdi,c
0127 D297              262     setb clk
0129 C297              263     clr clk
012B E543              264     mov a,DAl
                       265     ;clr sdi ;bit8 - D7
012D 33                266     rlc a
012E 9295              267     mov sdi,c
0130 D297              268     setb clk
0132 C297              269     clr clk
                       270     ;clr sdi ;bit9 - D6
0134 33                271     rlc a
0135 9295              272     mov sdi,c
0137 D297              273     setb clk
0139 C297              274     clr clk
                       275     ;clr sdi ;bit10 - D5
013B 33                276     rlc a
013C 9295              277     mov sdi,c
013E D297              278     setb clk
0140 C297              279     clr clk
                       280     ;clr sdi ;bit11 - D4
0142 33                281     rlc a
0143 9295              282     mov sdi,c
0145 D297              283     setb clk
0147 C297              284     clr clk
                       285     ;clr sdi ;bit12 - D3
0149 33                286     rlc a
014A 9295              287     mov sdi,c
014C D297              288     setb clk
014E C297              289     clr clk
                       290
                       291     ;clr sdi ;bit13 - D2
0150 33                292     rlc a
0151 9295              293     mov sdi,c
0153 D297              294     setb clk
0155 C297              295     clr clk
                       296     ;clr sdi ;bit14 - D1
0157 33                297     rlc a
0158 9295              298     mov sdi,c
015A D297              299     setb clk
015C C297              300     clr clk
                       301     ;clr sdi ;bit15 - D0
015E 33                302     rlc a
015F 9295              303     mov sdi,c
0161 D297              304     setb clk
                       305     ;clr clk
0163 D2B4              306     setb csDA
0165 22                307     RET
                       308
                       309     ;-------------------------------------
                       310     ;Leximi i tensionit ne AD, dhe vendosja e rezultatit ne ADh dhe ADl
                       311     ;-------------------------------------
                       312     Read_AD:
                       313
0166 C2B5              314     clr cs
0168 C297              315     clr clk
016A D295              316     setb sdi ;bit0 - Start
016C D297              317     setb clk
016E C297              318     clr clk
0170 D295              319     setb sdi ;bit1 - SGL
0172 D297              320     setb clk
0174 C297              321     clr clk
0176 C295              322     clr sdi ;bit2 - D2
0178 D297              323     setb clk
017A C297              324     clr clk
017C C295              325     clr sdi ;bit3 - D1              0
017E D297              326     setb clk
0180 C297              327     clr clk
0182 D295              328     setb sdi ;bit4 - D0             1
0184 D297              329     setb clk
0186 C297              330     clr clk
                       331
0188 D297              332     setb clk
018A C297              333     clr clk
018C A296              334     mov c,sdo ;bit5 - Null Bit
                       335
018E 7400              336     mov A,#0
                       337     ;mov a.4,c
0190 D297              338     setb clk
0192 C297              339     clr clk
0194 A296              340     mov c,sdo ;bit6 - B11
                       341
0196 92E3              342     mov a.3,c
0198 D297              343     setb clk
019A C297              344     clr clk
019C A296              345     mov c,sdo ;bit7 - B10
                       346
019E 92E2              347     mov a.2,c
01A0 D297              348     setb clk
01A2 C297              349     clr clk
01A4 A296              350     mov c,sdo ;bit8 - B9
                       351
01A6 92E1              352     mov a.1,c
01A8 D297              353     setb clk
01AA C297              354     clr clk
01AC A296              355     mov c,sdo ;bit9 - B8
                       356
01AE 92E0              357     mov a.0,c
01B0 F544              358     mov ADh,a
                       359
01B2 D297              360     setb clk
01B4 C297              361     clr clk
01B6 A296              362     mov c,sdo ;bit10 - B7
                       363
01B8 92E7              364     mov a.7,c
01BA D297              365     setb clk
01BC C297              366     clr clk
01BE A296              367     mov c,sdo ;bit11 - B6
                       368
01C0 92E6              369     mov a.6,c
01C2 D297              370     setb clk
01C4 C297              371     clr clk
01C6 A296              372     mov c,sdo ;bit12 - B5
                       373
01C8 92E5              374     mov a.5,c
01CA D297              375     setb clk
01CC C297              376     clr clk
01CE A296              377     mov c,sdo ;bit13 - B4
                       378
                       379
01D0 92E4              380     mov a.4,c
01D2 D297              381     setb clk
01D4 C297              382     clr clk
01D6 A296              383     mov c,sdo ;bit14 - B3
                       384
01D8 92E3              385     mov a.3,c
01DA D297              386     setb clk
01DC C297              387     clr clk
01DE A296              388     mov c,sdo ;bit15 - B2
                       389
01E0 92E2              390     mov a.2,c
01E2 D297              391     setb clk
01E4 C297              392     clr clk
01E6 A296              393     mov c,sdo ;bit16 - B1
                       394
01E8 92E1              395     mov a.1,c
01EA D297              396     setb clk
01EC C297              397     clr clk
01EE A296              398     mov c,sdo ;bit17 - B0
                       399
01F0 92E0              400     mov a.0,c
01F2 D297              401     setb clk
                       402     ;clr clk
01F4 D2B5              403     setb cs
01F6 F545              404     mov ADl,a
                       405
01F8 00                406     nop
01F9 00                407     nop
01FA 22                408
                       409
                       410     Read_AD0:
                       411
01FB C2B5              412     clr cs
01FD C297              413     clr clk
01FF D295              414     setb sdi ;bit0 - Start
0201 D297              415     setb clk
0203 C297              416     clr clk
0205 D295              417     setb sdi ;bit1 - SGL
0207 D297              418     setb clk
0209 C297              419     clr clk
020B C295              420     clr sdi ;bit2 - D2
020D D297              421     setb clk
020F C297              422     clr clk
0211 C295              423     clr sdi ;bit3 - D1              0
0213 D297              424     setb clk
0215 C297              425     clr clk
0217 C295              426     clr sdi ;bit4 - D0              0
0219 D297              427     setb clk
021B C297              428     clr clk
                       429
021D D297              430     setb clk
021F C297              431     clr clk
0221 A296              432     mov c,sdo ;bit5 - Null Bit
                       433
0223 7400              434     mov A,#0
                       435     ;mov a.4,c
0225 D297              436     setb clk
0227 C297              437     clr clk
0229 A296              438     mov c,sdo ;bit6 - B11
                       439
022B 92E3              440     mov a.3,c
022D D297              441     setb clk
022F C297              442     clr clk
0231 A296              443     mov c,sdo ;bit7 - B10
                       444
0233 92E2              445     mov a.2,c
0235 D297              446     setb clk
0237 C297              447     clr clk
0239 A296              448     mov c,sdo ;bit8 - B9
                       449
023B 92E1              450     mov a.1,c
023D D297              451     setb clk
023F C297              452     clr clk
0241 A296              453     mov c,sdo ;bit9 - B8
                       454
0243 92E0              455     mov a.0,c
0245 F571              456     mov AD0h,a
                       457
0247 D297              458     setb clk
0249 C297              459     clr clk
024B A296              460     mov c,sdo ;bit10 - B7
                       461
024D 92E7              462     mov a.7,c
024F D297              463     setb clk
0251 C297              464     clr clk
0253 A296              465     mov c,sdo ;bit11 - B6
                       466
0255 92E6              467     mov a.6,c
0257 D297              468     setb clk
0259 C297              469     clr clk
025B A296              470     mov c,sdo ;bit12 - B5
                       471
025D 92E5              472     mov a.5,c
025F D297              473     setb clk
0261 C297              474     clr clk
0263 A296              475     mov c,sdo ;bit13 - B4
                       476
                       477
0265 92E4              478     mov a.4,c
0267 D297              479     setb clk
0269 C297              480     clr clk
026B A296              481     mov c,sdo ;bit14 - B3
                       482
026D 92E3              483     mov a.3,c
026F D297              484     setb clk
0271 C297              485     clr clk
0273 A296              486     mov c,sdo ;bit15 - B2
                       487
0275 92E2              488     mov a.2,c
0277 D297              489     setb clk
0279 C297              490     clr clk
027B A296              491     mov c,sdo ;bit16 - B1
                       492
027D 92E1              493     mov a.1,c
027F D297              494     setb clk
0281 C297              495     clr clk
0283 A296              496     mov c,sdo ;bit17 - B0
                       497
0285 92E0              498     mov a.0,c
0287 D297              499     setb clk
                       500     ;clr clk
0289 D2B5              501     setb cs
028B F572              502     mov AD0l,a
                       503
028D 00                504     nop
028E 00                505     nop
028F 22                506
                       507
                       508     ;------------------------------------
                       509     ;leximi i temperatures prej sensorit DS18B20
                       510     ;------------------------------------
                       511     Lexo_Temp:
0290 755D31            512     mov crcpolynom1wire,#00110001b  ; vlera e polinomit per llogaritjen e CRC8 1wire
0293 00                513     nop
0294 120A5C            514     lcall threset
0297 7433              515     mov a,#33h
0299 120A80            516     lcall thwrite
029C 120AAC            517     lcall readromfromslave          ;lexohet ROM i slave-it ds18b20 dhe ruhet ne adresat perkatese
                       518     crcromwrong:
029F 755E00            519     mov crc,#00h
02A2 E55F              520     mov a,5fh
02A4 120BDE            521     lcall crc_1wire_generator
02A7 E560              522     mov a,60h
02A9 120BDE            523     lcall crc_1wire_generator
02AC E561              524     mov a,61h
02AE 120BDE            525     lcall crc_1wire_generator
02B1 E562              526     mov a,62h
02B3 120BDE            527     lcall crc_1wire_generator
02B6 E563              528     mov a,63h
02B8 120BDE            529     lcall crc_1wire_generator
02BB E564              530     mov a,64h
02BD 120BDE            531     lcall crc_1wire_generator
02C0 E565              532     mov a,65h
02C2 120BDE            533     lcall crc_1wire_generator
                       534
02C5 E55E              535     mov a,crc
02C7 B566D5            536     cjne a,66h,crcromwrong          ;kontrollohet se a jane crc e rom-it te njejta me te masterit dhe sla
02CA 00                537     nop
02CB 120A5C            538     lcall threset
02CE 120AFA            539     lcall matchrom                  ;dergohet ROMi i slavit qe te punohet vetem me slavin perkates
02D1 744E              540     mov a,#4eh                      ;komanda write scratchpad
02D3 120A80            541     lcall thwrite
02D6 74FF              542     mov a,#0ffh                     ;th=255
02D8 120A80            543     lcall thwrite
02DB 7400              544     mov a,#00h                      ;tl=0
02DD 120A80            545     lcall thwrite
02E0 741F              546     mov a,#00011111b                ;config register resolucioni 9bitsh
02E2 120A80            547     lcall thwrite
02E5 00                548     nop
                       549
02E6 120A5C            550     lcall threset
02E9 120AFA            551     lcall matchrom
02EC 7444              552     mov a,#44h                      ;convert T komanda
02EE 120A80            553     lcall thwrite
02F1 120B5C            554     lcall converteddelay            ;vonese 99ms
02F4 00                555     nop
02F5 120A5C            556     lcall threset
02F8 120AFA            557     lcall matchrom
02FB 120B28            558     lcall scratchpadread
                       559
                       560     crcscratchpadwrong:
02FE 755E00            561     mov crc,#00h
0301 E567              562     mov a,67h
0303 120BDE            563     lcall crc_1wire_generator
0306 E568              564     mov a,68h
0308 120BDE            565     lcall crc_1wire_generator
030B E569              566     mov a,69h
030D 120BDE            567     lcall crc_1wire_generator
0310 E56A              568     mov a,6ah
0312 120BDE            569     lcall crc_1wire_generator
0315 E56B              570     mov a,6bh
0317 120BDE            571     lcall crc_1wire_generator
031A E56C              572     mov a,6ch
031C 120BDE            573     lcall crc_1wire_generator
031F E56D              574     mov a,6dh
0321 120BDE            575     lcall crc_1wire_generator
0324 E56E              576     mov a,6eh
0326 120BDE            577     lcall crc_1wire_generator
0329 E55E              578     mov a,crc
032B B56FD0            579     cjne a,6fh,crcscratchpadwrong
                       580
032E 22                581     RET
                       582
                       583     ;-----------------------------------
                       584     ;rrit vleren e DA per 400
                       585     ;-----------------------------------
                       586     Inc_400:
032F C0E0              587     push acc
0331 C3                588     clr c
0332 E543              589     mov a,dal
0334 2490              590     add a,#90h
0336 F543              591     mov dal, a
0338 E542              592     mov a, dah
033A 3401              593     addc a,#1
033C 4470              594     orl a,#01110000b
033E F542              595     mov dah, a
                       596
0340 D0E0              597     pop acc
0342 22                598     RET
                       599     ;----------------------------------------------------------------------------------------------------
                       600     Delay_max:
0343 7A7C              601             MOV     R2, #07Ch
0345 7907              602             MOV     R1, #07h
0347 7819              603             MOV     R0, #019h
0349 00                604             NOP
034A D8FE              605             DJNZ    R0, $
034C D9F9              606             DJNZ    R1, $-5
034E DAF5              607             DJNZ    R2, $-9
0350 78E3              608             MOV     R0, #0E3h
0352 D8FE              609             DJNZ    R0, $
0354 00                610             NOP
0355 22                611     RET
                       612
                       613     ;----------------------------------------------------------------------------------------------------
                       614     Delay_10ms:
0356 7A0C              615             MOV     R2, #00Ch
0358 79EE              616             MOV     R1, #0EEh
035A 781A              617             MOV     R0, #01Ah
035C 00                618             NOP
035D D8FE              619             DJNZ    R0, $
035F D9F9              620             DJNZ    R1, $-5
0361 DAF5              621             DJNZ    R2, $-9
0363 780D              622             MOV     R0, #00Dh
0365 D8FE              623             DJNZ    R0, $
0367 22                624     RET
                       625     ;-----------------------------------------------  7Seg Interrupt  -----------------------------------
                       626     Interrupt_7seg:
0368 C0E0              627             PUSH ACC
                       628
036A E519              629             MOV A,Display_Status
036C 23                630             RL A
036D 23                631             RL A
036E 900372            632             MOV DPTR , #TAB_Status
0371 73                633             JMP @A+DPTR
                       634
                       635     TAB_Status:
0372 0203A5            636             LJMP Display_Menu                       ;00
0375 00                637             NOP
0376 0203C3            638             LJMP Display_Read_DA                    ;01     ; Display_Shfaq_DA
0379 00                639             NOP
037A 0203F9            640             LJMP Display_Read_AD                    ;02     ; Dsipaly_Shfaq_AD
037D 00                641             NOP
037E 02042F            642             LJMP Display_Lexo_Temp                  ;03     ; Display_Temp
0381 00                643             NOP
0382 020465            644             LJMP Display_Write_DA                   ;04     ; Dispaly_Write_DA
0385 00                645             NOP
0386 02049B            646             LJMP Display_Read_Get_Number            ;05
0389 00                647             NOP
038A 0207EB            648             LJMP Display_Read_Show_DA               ;06
038D 00                649             NOP
038E 020836            650             LJMP Display_Read_Show_AD               ;07
0391 00                651             NOP
0392 0208CC            652             LJMP Display_Read_Show_Temp             ;08
0395 00                653             NOP
0396 020902            654             LJMP Display_Read_AD0                   ;09
0399 00                655             NOP
039A 020938            656             LJMP Display_Read_AD1                   ;10
039D 00                657             NOP
039E 020881            658             LJMP Display_Read_Show_AD0              ;11
03A1 00                659             NOP
03A2 02096E            660             LJMP END_7Seg_Int
                       661
                       662     ;----------------------------------------------------------------------------------------------------
                       663     Display_Menu:                                   ;00
03A5 753A37            664                     MOV DIS_3,#00110111B    ;M
03A8 753979            665                     MOV DIS_2,#01111001B    ;E
03AB 753854            666                     MOV DIS_1,#01010100B    ;n
03AE 75371C            667                     MOV DIS_0,#00011100B    ;u
03B1 120994            668                     LCALL SHOW_7SEG
                       669
03B4 20B209            670                             JB Button_OK,END_D00
03B7 751901            671                                     MOV Display_Status,#01
03BA 120971            672                                     LCALL Clean_LCD
03BD 30B2FD            673                                     JNB Button_OK,$
03C0 02096E            674     END_D00:        LJMP END_7Seg_Int
                       675     ;----------------------------------------------------------------------------------------------------
                       676
                       677     Display_Read_DA:                                ;01
03C3 753A86            678                     MOV DIS_3,#10000110B    ;1.
03C6 7539B8            679                     MOV DIS_2,#10111000B    ;L.
03C9 75383F            680                     MOV DIS_1,#00111111B    ;D
03CC 753777            681                     MOV DIS_0,#01110111B    ;A
03CF 120994            682                     LCALL SHOW_7SEG
                       683
03D2 20B109            684                             JB Button_Next,OK_D01
03D5 751902            685                                     MOV Display_Status,#02
03D8 120971            686                                     LCALL Clean_LCD
03DB 30B1FD            687                                     JNB Button_Next,$
03DE 20B209            688     OK_D01:                 JB Button_OK,ESC_D01
03E1 751906            689                                     MOV Display_Status,#06 ;03              ;Display vleren e DA
03E4 120971            690                                     LCALL Clean_LCD
03E7 30B2FD            691                                     JNB Button_OK,$
03EA 20B309            692     ESC_D01:                JB Button_ESC,END_D01
03ED 751900            693                                     MOV Display_Status,#00
03F0 120971            694                                     LCALL Clean_LCD
03F3 30B3FD            695                                     JNB Button_ESC,$
03F6 02096E            696     END_D01:        LJMP END_7Seg_Int
                       697     ;----------------------------------------------------------------------------------------------------
                       698
                       699     Display_Read_AD:                                ;02
03F9 753ADB            700                     MOV DIS_3,#11011011B    ;2.
03FC 7539B8            701                     MOV DIS_2,#10111000B    ;L.
03FF 753877            702                     MOV DIS_1,#01110111B    ;A
0402 75373F            703                     MOV DIS_0,#00111111B    ;D
0405 120994            704                     LCALL SHOW_7SEG
                       705
0408 20B109            706                             JB Button_Next,OK_D02
040B 751903            707                                     MOV Display_Status,#03
040E 120971            708                                     LCALL Clean_LCD
0411 30B1FD            709                                     JNB Button_Next,$
0414 20B209            710     OK_D02:                 JB Button_OK,ESC_D02
0417 751909            711                                     MOV Display_Status,#09 ;03              ;Zgjedh AD
041A 120971            712                                     LCALL Clean_LCD
041D 30B2FD            713                                     JNB Button_OK,$
0420 20B309            714     ESC_D02:                JB Button_ESC,END_D02
0423 751900            715                                     MOV Display_Status,#00
0426 120971            716                                     LCALL Clean_LCD
0429 30B3FD            717                                     JNB Button_ESC,$
042C 02096E            718     END_D02:                LJMP END_7Seg_Int
                       719     ;----------------------------------------------------------------------------------------------------
                       720
                       721     Display_Lexo_Temp:                              ;03
042F 753ACF            722                     MOV DIS_3,#11001111B    ;3.
0432 7539B8            723                     MOV DIS_2,#10111000B    ;L.
0435 753800            724                     MOV DIS_1,#00000000B    ;
0438 753778            725                     MOV DIS_0,#01111000B    ;t
043B 120994            726                     LCALL SHOW_7SEG
                       727
043E 20B109            728                             JB Button_Next,OK_D03
0441 751904            729                                     MOV Display_Status,#04
0444 120971            730                                     LCALL Clean_LCD
0447 30B1FD            731                                     JNB Button_Next,$
044A 20B209            732     OK_D03:                 JB Button_OK,ESC_D03
044D 751908            733                                     MOV Display_Status,#08          ;Dispaly vleren e T
0450 120971            734                                     LCALL Clean_LCD
0453 30B2FD            735                                     JNB Button_OK,$
0456 20B309            736     ESC_D03:                JB Button_ESC,END_D03
0459 751900            737                                     MOV Display_Status,#00
045C 120971            738                                     LCALL Clean_LCD
045F 30B3FD            739                                     JNB Button_ESC,$
0462 02096E            740     END_D03:                LJMP END_7Seg_Int
                       741     ;----------------------------------------------------------------------------------------------------
                       742     Display_Write_DA:                               ;04
0465 753AE6            743                     MOV DIS_3,#11100110B    ;4.
0468 7539ED            744                     MOV DIS_2,#11101101B    ;S.
046B 75383F            745                     MOV DIS_1,#00111111B    ;D
046E 753777            746                     MOV DIS_0,#01110111B    ;A
0471 120994            747                     LCALL SHOW_7SEG
                       748
0474 20B109            749                             JB Button_Next,OK_D04
0477 751901            750                                     MOV Display_Status,#01
047A 120971            751                                     LCALL Clean_LCD
047D 30B1FD            752                                     JNB Button_Next,$
0480 20B209            753     OK_D04:                 JB Button_OK,ESC_D04
0483 751905            754                                     MOV Display_Status,#05          ;Merr vleren qe duhet te shkruhet ne
0486 120971            755                                     LCALL Clean_LCD
0489 30B2FD            756                                     JNB Button_OK,$
048C 20B309            757     ESC_D04:                JB Button_ESC,END_D04
048F 751900            758                                     MOV Display_Status,#00
0492 120971            759                                     LCALL Clean_LCD
0495 30B3FD            760                                     JNB Button_ESC,$
0498 02096E            761     END_D04:        LJMP END_7Seg_Int
                       762
                       763     ;----------------------------------------------------------------------------------------------------
                       764     Display_Read_Get_Number:                        ;05
049B C28E              765                     CLR TR1
                       766
                       767     ;------------------------------
                       768     ;leximi i numrit te pare (Display 3), per vleren e DA
                       769     ;------------------------------
                       770     Dis3_s:
049D 30A01D            771                     JNB BUTTON_0,CI_B0_D3
04A0 30A128            772                     JNB BUTTON_1,CI_B1_D3
04A3 30A233            773                     JNB BUTTON_2,CI_B2_D3
04A6 30A33E            774                     JNB BUTTON_3,CI_B3_D3
04A9 30A449            775                     JNB BUTTON_4,CI_B4_D3
04AC 753A08            776                     MOV DIS_3,#00001000B    ;_              ;Leximi i numrit te pare te DA
04AF 753900            777                     MOV DIS_2,#00000000B    ;
04B2 753800            778                     MOV DIS_1,#00000000B    ;
04B5 753700            779                     MOV DIS_0,#00000000B    ;
04B8 120994            780                     LCALL Show_7seg
04BB 80E0              781                     SJMP Dis3_s
                       782     CI_B0_D3:
04BD 120971            783                     LCALL Clean_LCD
04C0 30A0FD            784                     JNB BUTTON_0,$
04C3 753A3F            785                     MOV DIS_3,#00111111B    ;0
04C6 754A00            786                     MOV C3,#0
04C9 8038              787                     SJMP Next_DIS2_CI
                       788     CI_B1_D3:
04CB 120971            789                     LCALL Clean_LCD
04CE 30A1FD            790                     JNB BUTTON_1,$
04D1 753A06            791                     MOV DIS_3,#00000110B    ;1
04D4 754A01            792                     MOV C3,#1
04D7 802A              793                     SJMP Next_DIS2_CI
                       794     CI_B2_D3:
04D9 120971            795                     LCALL Clean_LCD
04DC 30A2FD            796                     JNB BUTTON_2,$
04DF 753A5B            797                     MOV DIS_3,#01011011B    ;2
04E2 754A02            798                     MOV C3,#2
04E5 801C              799                     SJMP Next_DIS2_CI
                       800     CI_B3_D3:
04E7 120971            801                     LCALL Clean_LCD
04EA 30A3FD            802                     JNB BUTTON_3,$
04ED 753A4F            803                     MOV DIS_3,#01001111B    ;3
04F0 754A03            804                     MOV C3,#3
04F3 800E              805                     SJMP Next_DIS2_CI
                       806     CI_B4_D3:
04F5 120971            807                     LCALL Clean_LCD
04F8 30A4FD            808                     JNB BUTTON_4,$
04FB 753A66            809                     MOV DIS_3,#01100110B    ;4
04FE 754A04            810                     MOV C3,#4
0501 8000              811                     SJMP Next_DIS2_CI
                       812
                       813     ;------------------------------
                       814     ;leximi i numrit te dyte (Display 2), per vleren e DA
                       815     ;------------------------------
0503 E54A              816     Next_DIS2_CI:   MOV A, C3
0505 B40409            817                     CJNE A, #4, C3_JO4      ; nese numri i pare i DA eshte 4, numri i dyte duhet te jete
0508 75393F            818                     MOV DIS_2,#00111111B    ;0
050B 754900            819                     MOV C2,#0
050E 0205D2            820                     LJMP Next_DIS1_CI
                       821     C3_JO4:
0511 75A0FF            822                     MOV P2,#0FFH
0514 30A02F            823                     JNB BUTTON_0,CI_B0_D2
0517 30A13A            824                     JNB BUTTON_1,CI_B1_D2
051A 30A245            825                     JNB BUTTON_2,CI_B2_D2
051D 30A350            826                     JNB BUTTON_3,CI_B3_D2
0520 30A45B            827                     JNB BUTTON_4,CI_B4_D2
0523 30A566            828                     JNB BUTTON_5,CI_B5_D2
0526 30A671            829                     JNB BUTTON_6,CI_B6_D2
0529 30A77C            830                     JNB BUTTON_7,CI_B7_D2
052C 30B711            831                     JNB BUTTON_8,MakeLong_CI_B8_D2
052F 30B611            832                     JNB BUTTON_9,MakeLong_CI_B9_D2
0532 753908            833                     MOV DIS_2,#00001000B    ;_              ;Lexo numrin e dyte
0535 753800            834                     MOV DIS_1,#00000000B    ;
0538 753700            835                     MOV DIS_0,#00000000B    ;
053B 120994            836                     LCALL Show_7seg
053E 80C3              837                     SJMP Next_DIS2_CI
0540 0205B6            838             MakeLong_CI_B8_D2:      LJMP CI_B8_D2
0543 0205C4            839             MakeLong_CI_B9_D2:      LJMP CI_B9_D2
                       840     ;----------
                       841     CI_B0_D2:
0546 120971            842                     LCALL Clean_LCD
0549 30A0FD            843                     JNB BUTTON_0,$
054C 75393F            844                     MOV DIS_2,#00111111B    ;0
054F 754900            845                     MOV C2,#0
0552 807E              846                     SJMP Next_DIS1_CI
                       847     CI_B1_D2:
0554 120971            848                     LCALL Clean_LCD
0557 30A1FD            849                     JNB BUTTON_1,$
055A 753906            850                     MOV DIS_2,#00000110B    ;1
055D 754901            851                     MOV C2,#1
0560 8070              852                     SJMP Next_DIS1_CI
                       853     CI_B2_D2:
0562 120971            854                     LCALL Clean_LCD
0565 30A2FD            855                     JNB BUTTON_2,$
0568 75395B            856                     MOV DIS_2,#01011011B    ;2
056B 754902            857                     MOV C2,#2
056E 8062              858                     SJMP Next_DIS1_CI
                       859     CI_B3_D2:
0570 120971            860                     LCALL Clean_LCD
0573 30A3FD            861                     JNB BUTTON_3,$
0576 75394F            862                     MOV DIS_2,#01001111B    ;3
0579 754903            863                     MOV C2,#3
057C 8054              864                     SJMP Next_DIS1_CI
                       865     CI_B4_D2:
057E 120971            866                     LCALL Clean_LCD
0581 30A4FD            867                     JNB BUTTON_4,$
0584 753966            868                     MOV DIS_2,#01100110B    ;4
0587 754904            869                     MOV C2,#4
058A 8046              870                     SJMP Next_DIS1_CI
                       871     CI_B5_D2:
058C 120971            872                     LCALL Clean_LCD
058F 30A5FD            873                     JNB BUTTON_5,$
0592 75396D            874                     MOV DIS_2,#01101101B    ;5
0595 754905            875                     MOV C2,#5
0598 8038              876                     SJMP Next_DIS1_CI
                       877     CI_B6_D2:
059A 120971            878                     LCALL Clean_LCD
059D 30A6FD            879                     JNB BUTTON_6,$
05A0 75397D            880                     MOV DIS_2,#01111101B    ;6
05A3 754906            881                     MOV C2,#6
05A6 802A              882                     SJMP Next_DIS1_CI
                       883     CI_B7_D2:
05A8 120971            884                     LCALL Clean_LCD
05AB 30A7FD            885                     JNB BUTTON_7,$
05AE 753907            886                     MOV DIS_2,#00000111B    ;7
05B1 754907            887                     MOV C2,#7
05B4 801C              888                     SJMP Next_DIS1_CI
                       889     CI_B8_D2:
05B6 120971            890                     LCALL Clean_LCD
05B9 30B7FD            891                     JNB BUTTON_8,$
05BC 75397F            892                     MOV DIS_2,#01111111B    ;8
05BF 754908            893                     MOV C2,#8
05C2 800E              894                     SJMP Next_DIS1_CI
                       895     CI_B9_D2:
05C4 120971            896                     LCALL Clean_LCD
05C7 30B6FD            897                     JNB BUTTON_9,$
05CA 75396F            898                     MOV DIS_2,#01101111B    ;9
05CD 754909            899                     MOV C2,#9
05D0 8000              900                     SJMP Next_DIS1_CI
                       901
                       902     ;------------------------------
                       903     ;leximi i numrit te trete (Display 1), per vleren e DA
                       904     ;------------------------------
05D2 75A0FF            905     Next_DIS1_CI:   MOV P2,#0FFH
05D5 30A02C            906                     JNB BUTTON_0,CI_B0_D1
05D8 30A137            907                     JNB BUTTON_1,CI_B1_D1
05DB 30A242            908                     JNB BUTTON_2,CI_B2_D1
05DE 30A34D            909                     JNB BUTTON_3,CI_B3_D1
05E1 30A458            910                     JNB BUTTON_4,CI_B4_D1
05E4 30A563            911                     JNB BUTTON_5,CI_B5_D1
05E7 30A66E            912                     JNB BUTTON_6,CI_B6_D1
05EA 30A779            913                     JNB BUTTON_7,CI_B7_D1
05ED 30B70E            914                     JNB BUTTON_8,MakeLong_CI_B8_D1
05F0 30B60E            915                     JNB BUTTON_9,MakeLong_CI_B9_D1
05F3 753808            916                     MOV DIS_1,#00001000B    ;_
05F6 753700            917                     MOV DIS_0,#00000000B    ;
05F9 120994            918                     LCALL Show_7seg
05FC 80D4              919                     SJMP Next_DIS1_CI
05FE 020674            920             MakeLong_CI_B8_D1:      LJMP CI_B8_D1
0601 020682            921             MakeLong_CI_B9_D1:      LJMP CI_B9_D1
                       922     ;----------
                       923     CI_B0_D1:
0604 120971            924                     LCALL Clean_LCD
0607 30A0FD            925                     JNB BUTTON_0,$
060A 75383F            926                     MOV DIS_1,#00111111B    ;0
060D 754800            927                     MOV C1,#0
0610 807E              928                     SJMP Next_DIS0_CI
                       929     CI_B1_D1:
0612 120971            930                     LCALL Clean_LCD
0615 30A1FD            931                     JNB BUTTON_1,$
0618 753806            932                     MOV DIS_1,#00000110B    ;1
061B 754801            933                     MOV C1,#1
061E 8070              934                     SJMP Next_DIS0_CI
                       935     CI_B2_D1:
0620 120971            936                     LCALL Clean_LCD
0623 30A2FD            937                     JNB BUTTON_2,$
0626 75385B            938                     MOV DIS_1,#01011011B    ;2
0629 754802            939                     MOV C1,#2
062C 8062              940                     SJMP Next_DIS0_CI
                       941     CI_B3_D1:
062E 120971            942                     LCALL Clean_LCD
0631 30A3FD            943                     JNB BUTTON_3,$
0634 75384F            944                     MOV DIS_1,#01001111B    ;3
0637 754803            945                     MOV C1,#3
063A 8054              946                     SJMP Next_DIS0_CI
                       947     CI_B4_D1:
063C 120971            948                     LCALL Clean_LCD
063F 30A4FD            949                     JNB BUTTON_4,$
0642 753866            950                     MOV DIS_1,#01100110B    ;4
0645 754804            951                     MOV C1,#4
0648 8046              952                     SJMP Next_DIS0_CI
                       953     CI_B5_D1:
064A 120971            954                     LCALL Clean_LCD
064D 30A5FD            955                     JNB BUTTON_5,$
0650 75386D            956                     MOV DIS_1,#01101101B    ;5
0653 754805            957                     MOV C1,#5
0656 8038              958                     SJMP Next_DIS0_CI
                       959     CI_B6_D1:
0658 120971            960                     LCALL Clean_LCD
065B 30A6FD            961                     JNB BUTTON_6,$
065E 75387D            962                     MOV DIS_1,#01111101B    ;6
0661 754806            963                     MOV C1,#6
0664 802A              964                     SJMP Next_DIS0_CI
                       965     CI_B7_D1:
0666 120971            966                     LCALL Clean_LCD
0669 30A7FD            967                     JNB BUTTON_7,$
066C 753807            968                     MOV DIS_1,#00000111B    ;7
066F 754807            969                     MOV C1,#7
0672 801C              970                     SJMP Next_DIS0_CI
                       971     CI_B8_D1:
0674 120971            972                     LCALL Clean_LCD
0677 30B7FD            973                     JNB BUTTON_8,$
067A 75387F            974                     MOV DIS_1,#01111111B    ;8
067D 754808            975                     MOV C1,#8
0680 800E              976                     SJMP Next_DIS0_CI
                       977     CI_B9_D1:
0682 120971            978                     LCALL Clean_LCD
0685 30B6FD            979                     JNB BUTTON_9,$
0688 75386F            980                     MOV DIS_1,#01101111B    ;9
068B 754809            981                     MOV C1,#9
068E 8000              982                     SJMP Next_DIS0_CI
                       983
                       984     ;------------------------------
                       985     ;leximi i numrit te katert (Display 0), per vleren e DA
                       986     ;------------------------------
                       987     Next_DIS0_CI:
                       988
                       989
0690 75A0FF            990                     MOV P2,#0FFH
0693 30A038            991                     JNB BUTTON_0,CI_B0_D0
0696 30A143            992                     JNB BUTTON_1,CI_B1_D0
0699 30A24E            993                     JNB BUTTON_2,CI_B2_D0
069C 30A359            994                     JNB BUTTON_3,CI_B3_D0
069F 30A464            995                     JNB BUTTON_4,CI_B4_D0
06A2 30A56F            996                     JNB BUTTON_5,CI_B5_D0
                       997
06A5 E54A              998                     mov a, c3
06A7 B4040D            999                     cjne a, #4, c1_jo9
06AA E548             1000                     MOV A, C1
06AC B40908           1001                     CJNE A, #9, C1_JO9
06AF 753708           1002                     MOV DIS_0,#00001000B    ;_
06B2 120994           1003                     LCALL Show_7seg
06B5 80D9             1004                     SJMP NEXT_DIS0_CI
                      1005
06B7 30A668           1006     C1_JO9:         JNB BUTTON_6,CI_B6_D0
06BA 30A773           1007                     JNB BUTTON_7,CI_B7_D0
06BD 30B77E           1008                     JNB BUTTON_8,CI_B8_D0
06C0 30B608           1009                     JNB BUTTON_9,MakeLong_CI_B9_D0
06C3 753708           1010                     MOV DIS_0,#00001000B    ;_
06C6 120994           1011                     LCALL Show_7seg
06C9 80C5             1012                     SJMP Next_DIS0_CI
                      1013
06CB 02074C           1014             MakeLong_CI_B9_D0:      LJMP CI_B9_D0
                      1015     ;----------
                      1016     CI_B0_D0:
06CE 120971           1017                     LCALL Clean_LCD
06D1 30A0FD           1018                     JNB BUTTON_0,$
06D4 75373F           1019                     MOV DIS_0,#00111111B    ;0
06D7 754700           1020                     MOV C0,#0
06DA 807E             1021                     SJMP CI_END
                      1022     CI_B1_D0:
06DC 120971           1023                     LCALL Clean_LCD
06DF 30A1FD           1024                     JNB BUTTON_1,$
06E2 753706           1025                     MOV DIS_0,#00000110B    ;1
06E5 754701           1026                     MOV C0,#1
06E8 8070             1027                     SJMP CI_END
                      1028     CI_B2_D0:
06EA 120971           1029                     LCALL Clean_LCD
06ED 30A2FD           1030                     JNB BUTTON_2,$
06F0 75375B           1031                     MOV DIS_0,#01011011B    ;2
06F3 754702           1032                     MOV C0,#2
06F6 8062             1033                     SJMP CI_END
                      1034     CI_B3_D0:
06F8 120971           1035                     LCALL Clean_LCD
06FB 30A3FD           1036                     JNB BUTTON_3,$
06FE 75374F           1037                     MOV DIS_0,#01001111B    ;3
0701 754703           1038                     MOV C0,#3
0704 8054             1039                     SJMP CI_END
                      1040     CI_B4_D0:
0706 120971           1041                     LCALL Clean_LCD
0709 30A4FD           1042                     JNB BUTTON_4,$
070C 753766           1043                     MOV DIS_0,#01100110B    ;4
070F 754704           1044                     MOV C0,#4
0712 8046             1045                     SJMP CI_END
                      1046     CI_B5_D0:
0714 120971           1047                     LCALL Clean_LCD
0717 30A5FD           1048                     JNB BUTTON_5,$
071A 75376D           1049                     MOV DIS_0,#01101101B    ;5
071D 754705           1050                     MOV C0,#5
0720 8038             1051                     SJMP CI_END
                      1052     CI_B6_D0:
0722 120971           1053                     LCALL Clean_LCD
0725 30A6FD           1054                     JNB BUTTON_6,$
0728 75377D           1055                     MOV DIS_0,#01111101B    ;6
072B 754706           1056                     MOV C0,#6
072E 802A             1057                     SJMP CI_END
                      1058     CI_B7_D0:
0730 120971           1059                     LCALL Clean_LCD
0733 30A7FD           1060                     JNB BUTTON_7,$
0736 753707           1061                     MOV DIS_0,#00000111B    ;7
0739 754707           1062                     MOV C0,#7
073C 801C             1063                     SJMP CI_END
                      1064     CI_B8_D0:
073E 120971           1065                     LCALL Clean_LCD
0741 30B7FD           1066                     JNB BUTTON_8,$
0744 75377F           1067                     MOV DIS_0,#01111111B    ;8
0747 754708           1068                     MOV C0,#8
074A 800E             1069                     SJMP CI_END
                      1070     CI_B9_D0:
074C 120971           1071                     LCALL Clean_LCD
074F 30B6FD           1072                     JNB BUTTON_9,$
0752 75376F           1073                     MOV DIS_0,#01101111B    ;9
0755 754709           1074                     MOV C0,#9
0758 8000             1075                     SJMP CI_END
                      1076     CI_END:
                      1077
                      1078     ;---------------------------------------------
                      1079     ;vendosja e vleres ne DAh dhe DAl,  e llogaritur nga vlerat e lexuara me siper
                      1080     ;---------------------------------------------
075A E54A             1081                             MOV A,C3                ; shumezimi i numrit te pare me 1000
075C 75F064           1082                             MOV B,#100
075F A4               1083                             MUL AB
0760 F9               1084                             mov r1, a
0761 AAF0             1085                             mov r2, b
                      1086
0763 75F00A           1087                             mov b, #10
0766 A4               1088                             mul ab
0767 F9               1089                             mov r1, a
0768 EA               1090                             mov a, r2
0769 AAF0             1091                             mov r2, b
076B 75F00A           1092                             mov b, #10
076E A4               1093                             mul ab
076F 2A               1094                             add a, r2
0770 FA               1095                             mov r2, a
                      1096
                      1097
0771 E549             1098                             MOV A,C2                ; shumezimi i numrit te dyte me 100
0773 75F064           1099                             MOV B,#100
0776 A4               1100                             MUL AB
0777 29               1101                             add a, r1
0778 FB               1102                             mov r3, a
0779 E5F0             1103                             mov a, b
077B 3A               1104                             addc a, r2
077C F5F0             1105                             mov b, a
077E EB               1106                             mov a, r3
077F F9               1107                             mov r1, a
0780 AAF0             1108                             mov r2, b
                      1109
                      1110
0782 E548             1111                             MOV A,C1                ; shumezimi i numrit te trete me 10
0784 75F00A           1112                             MOV B,#10
0787 A4               1113                             MUL AB
0788 29               1114                             add a, r1
0789 FB               1115                             mov r3, a
078A E5F0             1116                             mov a, b
078C 3A               1117                             addc a, r2
078D F5F0             1118                             mov b, a
078F EB               1119                             mov a, r3
0790 F9               1120                             mov r1, a
0791 AAF0             1121                             mov r2, b
                      1122
0793 E547             1123                             MOV A,C0                ; shumezimi i numrit te pare me 1
0795 75F001           1124                             MOV B,#1
0798 A4               1125                             MUL AB
0799 29               1126                             add a, r1
079A FB               1127                             mov r3, a
079B E5F0             1128                             mov a, b
079D 3A               1129                             addc a, r2
079E F5F0             1130                             mov b, a
07A0 EB               1131                             mov a, r3
                      1132
07A1 F543             1133                             mov DAl, a
07A3 E5F0             1134                             mov a,b
07A5 4470             1135                             orl a, #01110000b
07A7 F542             1136                             mov DAh, a
                      1137
                      1138     ;==============================================================
                      1139     ;pas leximit te vleres se DA, thirret rutina "mat_vlerat", e cila vendos vleren ne DA, dhe lexon AD
                      1140     ;------------------------------------------
                      1141     W_END2:
07A9 120994           1142                     LCALL SHOW_7SEG
07AC 20B111           1143                             JB Button_Next,OK_D10
07AF D28E             1144                                     SETB TR1
07B1 751900           1145                                     MOV Display_Status,#00          ;rikthimi ne MENU
07B4 120971           1146                                     LCALL Clean_LCD
07B7 30B1FD           1147                                     JNB Button_Next,$
07BA 120094           1148                                     lcall mat_vlerat                ; vendosja e vleres ne DA, leximi i A
07BD 0203A5           1149                                     LJMP Display_Menu
07C0 20B211           1150     OK_D10:                 JB Button_OK,ESC_D10
07C3 D28E             1151                                     SETB TR1
07C5 751900           1152                                     MOV Display_Status,#00
07C8 120971           1153                                     LCALL Clean_LCD
07CB 30B2FD           1154                                     JNB Button_OK,$
07CE 120094           1155                                     lcall mat_vlerat
07D1 0203A5           1156                                     LJMP Display_Menu
07D4 20B311           1157     ESC_D10:                JB Button_ESC,END_D10
07D7 D28E             1158                                     SETB TR1
07D9 751900           1159                                     MOV Display_Status,#00
07DC 120971           1160                                     LCALL Clean_LCD
07DF 30B3FD           1161                                     JNB Button_ESC,$
07E2 120094           1162                                     lcall mat_vlerat
07E5 0203A5           1163                                     LJMP Display_MENU
07E8 0207A9           1164     END_D10:                LJMP W_END2
                      1165
                      1166     ;====================================================================================================
                      1167     ;vendosja e vleres se shkruar ne DA, ne 7 segmentesh
                      1168     ;---------------------------------------
                      1169     Display_Read_Show_DA:                           ;06
07EB E542             1170                     MOV a, DAh
07ED 540F             1171                     anl a,#0fh
07EF F540             1172                     MOV Vlera7SegH,a
07F1 854341           1173                     MOV Vlera7Seg,DAl
07F4 1209E5           1174                     LCALL Show_V4096        ;konverton numrin heksadecimal ne decimal, dhe per shfaqje ne
                      1175
07F7 853C3A           1176                     MOV DIS_3,MIJESHET      ;
07FA 853D39           1177                     MOV DIS_2,QINDESHET
07FD 853E38           1178                     MOV DIS_1,DHJETESHET    ;
0800 853F37           1179                     MOV DIS_0,NJESHET       ;
0803 120994           1180                     LCALL SHOW_7SEG
0806 20B10C           1181                             JB Button_Next,OK_D06
0809 751900           1182                                     MOV Display_Status,#00
080C 120971           1183                                     LCALL Clean_LCD
080F 30B1FD           1184                                     JNB Button_Next,$
0812 0203A5           1185                                     LJMP Display_Menu
0815 20B20C           1186     OK_D06:                 JB Button_OK,ESC_D06
0818 751900           1187                                     MOV Display_Status,#00
081B 120971           1188                                     LCALL Clean_LCD
081E 30B2FD           1189                                     JNB Button_OK,$
0821 0203A5           1190                                     LJMP Display_Menu
0824 20B30C           1191     ESC_D06:                JB Button_ESC,END_D06
0827 751900           1192                                     MOV Display_Status,#00
082A 120971           1193                                     LCALL Clean_LCD
082D 30B3FD           1194                                     JNB Button_ESC,$
0830 0203A5           1195                                     LJMP Display_Menu
0833 02096E           1196     END_D06:        LJMP END_7Seg_Int
                      1197
                      1198
                      1199     ;----------------------------------------------------------------------------------------------------
                      1200     ;vendosja e vleres se lexuar nga AD, ne 7 segmentesh
                      1201     ;---------------------------------------
                      1202     Display_Read_Show_AD:                           ;07
0836 E544             1203                     MOV a, adh
0838 540F             1204                     anl a,#0fh
083A F540             1205                     MOV Vlera7SegH,a
083C 854541           1206                     MOV Vlera7Seg,ADl
083F 1209E5           1207                     LCALL Show_V4096
                      1208
                      1209
0842 853C3A           1210                     MOV DIS_3,MIJESHET      ;
0845 853D39           1211                     MOV DIS_2,QINDESHET
0848 853E38           1212                     MOV DIS_1,DHJETESHET    ;
084B 853F37           1213                     MOV DIS_0,NJESHET       ;
084E 120994           1214                     LCALL SHOW_7SEG
0851 20B10C           1215                             JB Button_Next,OK_D07
0854 751900           1216                                     MOV Display_Status,#00
0857 120971           1217                                     LCALL Clean_LCD
085A 30B1FD           1218                                     JNB Button_Next,$
085D 0203A5           1219                                     LJMP Display_Menu
0860 20B20C           1220     OK_D07:                 JB Button_OK,ESC_D07
0863 751900           1221                                     MOV Display_Status,#00
0866 120971           1222                                     LCALL Clean_LCD
0869 30B2FD           1223                                     JNB Button_OK,$
086C 0203A5           1224                                     LJMP Display_Menu
086F 20B30C           1225     ESC_D07:                JB Button_ESC,END_D07
0872 751900           1226                                     MOV Display_Status,#00
0875 120971           1227                                     LCALL Clean_LCD
0878 30B3FD           1228                                     JNB Button_ESC,$
087B 0203A5           1229                                     LJMP Display_Menu
087E 02096E           1230     END_D07:        LJMP END_7Seg_Int
                      1231
                      1232     ;----------------------------------------------------------------------------------------------------
                      1233
                      1234     Display_Read_Show_AD0:                          ;11
                      1235
0881 E571             1236                     MOV a, AD0h
0883 540F             1237                     anl a,#0fh
0885 F540             1238                     MOV Vlera7SegH,a
0887 857241           1239                     MOV Vlera7Seg,AD0l
088A 1209E5           1240                     LCALL Show_V4096
                      1241
                      1242
088D 853C3A           1243                     MOV DIS_3,MIJESHET      ;
0890 853D39           1244                     MOV DIS_2,QINDESHET
0893 853E38           1245                     MOV DIS_1,DHJETESHET    ;
0896 853F37           1246                     MOV DIS_0,NJESHET       ;
0899 120994           1247                     LCALL SHOW_7SEG
089C 20B10C           1248                             JB Button_Next,OK_D11
089F 751900           1249                                     MOV Display_Status,#00
08A2 120971           1250                                     LCALL Clean_LCD
08A5 30B1FD           1251                                     JNB Button_Next,$
08A8 0203A5           1252                                     LJMP Display_Menu
08AB 20B20C           1253     OK_D11:                 JB Button_OK,ESC_D11
08AE 751900           1254                                     MOV Display_Status,#00
08B1 120971           1255                                     LCALL Clean_LCD
08B4 30B2FD           1256                                     JNB Button_OK,$
08B7 0203A5           1257                                     LJMP Display_Menu
08BA 20B30C           1258     ESC_D11:                JB Button_ESC,END_D11
08BD 751900           1259                                     MOV Display_Status,#00
08C0 120971           1260                                     LCALL Clean_LCD
08C3 30B3FD           1261                                     JNB Button_ESC,$
08C6 0203A5           1262                                     LJMP Display_Menu
08C9 02096E           1263     END_D11:        LJMP END_7Seg_Int
                      1264
                      1265     ;----------------------------------------------------------------------------------------------------
                      1266
                      1267     ;vendosja e vleres se lexuar nga sensori i temperatures, ne 7 segmentesh
                      1268     ;---------------------------------------
                      1269     Display_Read_Show_Temp:                         ;08
08CC 120C02           1270                     lcall temp_to_7segment
08CF 120994           1271                     LCALL SHOW_7SEG
08D2 20B10C           1272                             JB Button_Next,OK_D08
08D5 751900           1273                                     MOV Display_Status,#00
08D8 120971           1274                                     LCALL Clean_LCD
08DB 30B1FD           1275                                     JNB Button_Next,$
08DE 0203A5           1276                                     LJMP Display_Menu
08E1 20B20C           1277     OK_D08:                 JB Button_OK,ESC_D08
08E4 751900           1278                                     MOV Display_Status,#00
08E7 120971           1279                                     LCALL Clean_LCD
08EA 30B2FD           1280                                     JNB Button_OK,$
08ED 0203A5           1281                                     LJMP Display_Menu
08F0 20B30C           1282     ESC_D08:                JB Button_ESC,END_D08
08F3 751900           1283                                     MOV Display_Status,#00
08F6 120971           1284                                     LCALL Clean_LCD
08F9 30B3FD           1285                                     JNB Button_ESC,$
08FC 0203A5           1286                                     LJMP Display_Menu
08FF 02096E           1287     END_D08:        LJMP END_7Seg_Int
                      1288     ;----------------------------------------------------------------------------------------------------
                      1289
                      1290     Display_Read_AD0:                               ;09
                      1291
0902 753AB8           1292                     MOV DIS_3,#10111000B    ;L.
0905 753977           1293                     MOV DIS_2,#01110111B    ;A
0908 75383F           1294                     MOV DIS_1,#00111111B    ;D
090B 75373F           1295                     MOV DIS_0,#00111111B    ;0
090E 120994           1296                     LCALL SHOW_7SEG
                      1297
0911 20B109           1298                             JB Button_Next,OK_D09
0914 75190A           1299                                     MOV Display_Status,#10
0917 120971           1300                                     LCALL Clean_LCD
091A 30B1FD           1301                                     JNB Button_Next,$
091D 20B209           1302     OK_D09:                 JB Button_OK,ESC_D09
0920 75190B           1303                                     MOV Display_Status,#11 ;03              ;Lexo AD0
0923 120971           1304                                     LCALL Clean_LCD
0926 30B2FD           1305                                     JNB Button_OK,$
0929 20B309           1306     ESC_D09:                JB Button_ESC,END_D09
092C 751900           1307                                     MOV Display_Status,#00
092F 120971           1308                                     LCALL Clean_LCD
0932 30B3FD           1309                                     JNB Button_ESC,$
0935 02096E           1310     END_D09:                LJMP END_7Seg_Int
                      1311     ;----------------------------------------------------------------------------------------------------
                      1312
                      1313     Display_Read_AD1:                               ;10
                      1314
0938 753AB8           1315                     MOV DIS_3,#10111000B    ;L.
093B 753977           1316                     MOV DIS_2,#01110111B    ;A
093E 75383F           1317                     MOV DIS_1,#00111111B    ;D
0941 753706           1318                     MOV DIS_0,#00000110B    ;1
0944 120994           1319                     LCALL SHOW_7SEG
                      1320
0947 20B109           1321                             JB Button_Next,OK_D010
094A 751909           1322                                     MOV Display_Status,#09
094D 120971           1323                                     LCALL Clean_LCD
0950 30B1FD           1324                                     JNB Button_Next,$
0953 20B209           1325     OK_D010:                        JB Button_OK,ESC_D010
0956 751907           1326                                     MOV Display_Status,#07 ;03              ;Lexo AD1
0959 120971           1327                                     LCALL Clean_LCD
095C 30B2FD           1328                                     JNB Button_OK,$
095F 20B309           1329     ESC_D010:               JB Button_ESC,END_D010
0962 751900           1330                                     MOV Display_Status,#00
0965 120971           1331                                     LCALL Clean_LCD
0968 30B3FD           1332                                     JNB Button_ESC,$
096B 02096E           1333     END_D010:               LJMP END_7Seg_Int
                      1334     ;----------------------------------------------------------------------------------------------------
                      1335     END_7Seg_Int:
096E D0E0             1336             POP ACC
0970 32               1337     RETI
                      1338     ;----------------------------------------------------------------------------------------------------
                      1339     Clean_LCD:
0971 C03A             1340                                     PUSH DIS_3
0973 C039             1341                                     PUSH DIS_2
0975 C038             1342                                     PUSH DIS_1
0977 C037             1343                                     PUSH DIS_0
                      1344
0979 753A00           1345                                     MOV DIS_3,#00000000B    ;
097C 753900           1346                                     MOV DIS_2,#00000000B    ;
097F 753800           1347                                     MOV DIS_1,#00000000B    ;
0982 753700           1348                                     MOV DIS_0,#00000000B    ;
0985 120994           1349                                     LCALL SHOW_7SEG
0988 120356           1350                                     LCALL Delay_10ms
                      1351
098B D037             1352                                     POP DIS_0
098D D038             1353                                     POP DIS_1
098F D039             1354                                     POP DIS_2
0991 D03A             1355                                     POP DIS_3
0993 22               1356     RET
                      1357     ;----------------------------------------------------------------------------------------------------
                      1358     ;Ndezja e segmenteve te caktuara ne 7-segmentesh varesisht nga vlerat e vendosura ne DIS_0, DIS_1,DIS
                      1359     ;----------------------------------------
                      1360     SHOW_7SEG:
0994 E555             1361             MOV A , P1_GJT
0996 23               1362             RL A
0997 23               1363             RL A
0998 90099C           1364             MOV DPTR , #TABPROC
099B 73               1365             JMP @A+DPTR
                      1366
                      1367     TABPROC:
099C 0209AC           1368             LJMP P1_GJ00
099F 00               1369             NOP
09A0 0209BA           1370             LJMP P1_GJ01
09A3 00               1371             NOP
09A4 0209C8           1372             LJMP P1_GJ02
09A7 00               1373             NOP
09A8 0209D6           1374             LJMP P1_GJ03
09AB 00               1375             NOP
                      1376
                      1377     P1_GJ00:
09AC 5390F0           1378             ANL P1 , #11110000B
09AF 853780           1379             MOV P0 , DIS_0          ;Dis 0
09B2 D290             1380             SETB P1.0
09B4 755501           1381               MOV P1_GJT , #1
09B7 0209E4           1382             LJMP P1_END
                      1383
                      1384     P1_GJ01:
09BA 5390F0           1385             ANL P1 , #11110000B
09BD 853880           1386             MOV P0 , DIS_1          ;Dis 1
09C0 D291             1387             SETB P1.1
09C2 755502           1388               MOV P1_GJT , #2
09C5 0209E4           1389             LJMP P1_END
                      1390
                      1391     P1_GJ02:
09C8 5390F0           1392             ANL P1 , #11110000B
09CB 853980           1393             MOV P0 , DIS_2          ;Dis 2
09CE D292             1394             SETB P1.2
09D0 755503           1395               MOV P1_GJT , #3
09D3 0209E4           1396             LJMP P1_END
                      1397
                      1398     P1_GJ03:
09D6 5390F0           1399             ANL P1 , #11110000B
09D9 853A80           1400             MOV P0 , DIS_3          ;Dis 3
09DC D293             1401             SETB P1.3
09DE 755500           1402               MOV P1_GJT , #0
09E1 0209E4           1403             LJMP P1_END
                      1404
                      1405     P1_END:
09E4 22               1406     RET
                      1407     ;----------------------------------------------------------------------------------------------------
                      1408     Show_V4096:
09E5 A940             1409     mov r1, vlera7segh
09E7 A841             1410     mov r0, vlera7seg
                      1411
09E9 7B03             1412     mov r3, #3h
09EB 7AE8             1413     mov r2, #0e8h
                      1414
09ED 120A17           1415     lcall div16
09F0 EA               1416     mov a, r2
09F1 120A4F           1417     lcall number_to_7seg
09F4 F53C             1418     mov mijeshet, a
                      1419
09F6 7B00             1420     mov r3, #00h
09F8 7A64             1421     mov r2, #100
09FA 120A17           1422     lcall div16
09FD EA               1423     mov a, r2
09FE 120A4F           1424     lcall number_to_7seg
0A01 F53D             1425     mov qindeshet, a
                      1426
0A03 7B00             1427     mov r3, #00h
0A05 7A0A             1428     mov r2, #10
0A07 120A17           1429     lcall div16
0A0A EA               1430     mov a, r2
0A0B 120A4F           1431     lcall number_to_7seg
0A0E F53E             1432     mov dhjeteshet, a
                      1433
0A10 E8               1434     mov a, r0
0A11 120A4F           1435     lcall number_to_7seg
0A14 F53F             1436     mov njeshet, a
                      1437
                      1438
0A16 22               1439     RET
                      1440     ;----------------------------------------------------------------------------------------------------
                      1441     ;pjesetimi i numrave 16 bitesh
                      1442     ;----------------------------------------
                      1443     div16:
0A17 C3               1444       CLR C
0A18 7C00             1445       MOV R4,#00h
0A1A 7D00             1446       MOV R5,#00h
0A1C 75F000           1447       MOV B,#00h
                      1448     div1:
0A1F 05F0             1449       INC B
0A21 EA               1450       MOV A,R2
0A22 33               1451       RLC A
0A23 FA               1452       MOV R2,A
0A24 EB               1453       MOV A,R3
0A25 33               1454       RLC A
0A26 FB               1455       MOV R3,A
0A27 50F6             1456       JNC div1
                      1457     div2:
0A29 EB               1458       MOV A,R3
0A2A 13               1459       RRC A
0A2B FB               1460       MOV R3,A
0A2C EA               1461       MOV A,R2
0A2D 13               1462       RRC A
0A2E FA               1463       MOV R2,A
0A2F C3               1464       CLR C
0A30 8907             1465       MOV 07h,R1
0A32 8806             1466       MOV 06h,R0
0A34 E8               1467       MOV A,R0
0A35 9A               1468       SUBB A,R2
0A36 F8               1469       MOV R0,A
0A37 E9               1470       MOV A,R1
0A38 9B               1471       SUBB A,R3
0A39 F9               1472       MOV R1,A
0A3A 5004             1473       JNC div3
0A3C A907             1474       MOV R1,07h
0A3E A806             1475       MOV R0,06h
                      1476     div3:
0A40 B3               1477       CPL C
0A41 EC               1478       MOV A,R4
0A42 33               1479       RLC A
0A43 FC               1480       MOV R4,A
0A44 ED               1481       MOV A,R5
0A45 33               1482       RLC A
0A46 FD               1483       MOV R5,A
0A47 D5F0DF           1484       DJNZ B,div2
0A4A AB05             1485       MOV R3,05h
0A4C AA04             1486       MOV R2,04h
0A4E 22               1487       RET
                      1488
                      1489     ;----------------------------------------------------------------------------------------------------
                      1490     ;caktimi i vlerave te display 7-segment, per numrat perkates decimal
                      1491     ;--------------------------------
                      1492     Number_To_7seg:
0A4F 04               1493             INC A
0A50 83               1494             MOVC A,@A+PC
0A51 22               1495             RET
                      1496     n7segtab:
0A52 3F               1497             db 00111111b    ;0
0A53 06               1498             db 00000110b    ;1
0A54 5B               1499             db 01011011b    ;2
0A55 4F               1500             db 01001111b    ;3
0A56 66               1501             db 01100110b    ;4
0A57 6D               1502             db 01101101b    ;5
0A58 7D               1503             db 01111101b    ;6
0A59 07               1504             db 00000111b    ;7
0A5A 7F               1505             db 01111111b    ;8
0A5B 6F               1506             db 01101111b    ;9
                      1507     ;----------------------------------------------------------------------------------------------------
                      1508     ;Rutinat per leximin e vleres se temperatures nga sensori DS18B20
                      1509     ;---------------------------------------------------------------------------------------
                      1510     threset:
                      1511                                     ;therm. bus reset signal and presence signal from slave
0A5C 7403             1512     mov a,#3
0A5E C2B3             1513     clr bustherm
0A60 75F0A0           1514     mov b,#160
0A63 D5F0FD           1515     djnz b,$
0A66 D2B3             1516     setb bustherm
0A68 75F004           1517     mov b,#4
0A6B C3               1518     clr c
                      1519     waitl1:
0A6C 20B308           1520     jb bustherm,wh1
0A6F D5F0FA           1521     djnz b,waitl1
0A72 D5E0F7           1522     djnz acc,waitl1
0A75 8008             1523     sjmp short1
                      1524     wh1:
0A77 75F046           1525     mov b,#70
                      1526     hl1:
0A7A A0B3             1527     orl c,/bustherm
0A7C D5F0FB           1528     djnz b,hl1
                      1529     short1:
                      1530
                      1531
0A7F 22               1532     ret
                      1533
                      1534     thwrite:                        ;funksioni per shkruarje te slave ds18b20
0A80 C0F0             1535     push b
0A82 75F008           1536     mov b,#8                        ;qe te paraqiten 8bita=2shifrahexa--> komandat e ds18b20
                      1537     loop2:
0A85 13               1538     rrc a                           ;biti lsb qe eshte ne A zhvendoset ne C, ndersa C ne msb e A
0A86 120A8F           1539     lcall bytetobit                 ;byte to bit perdoret sepse komunikimi eshte serik pra rend bitash
0A89 D5F0F9           1540     djnz b,loop2
0A8C D0F0             1541     pop b
0A8E 22               1542     ret
                      1543
                      1544     bytetobit:
0A8F C2B3             1545     clr bustherm
0A91 757F01           1546     mov 7fh,#1                      ;vonese 1x1.5x2=3us
0A94 120AA8           1547     lcall vonesa
0A97 92B3             1548     mov bustherm,c
0A99 757F14           1549     mov 7fh,#20                     ;vonese 2x1.5x20=60us
0A9C 120AA8           1550     lcall vonesa
0A9F D2B3             1551     setb bustherm
0AA1 757F14           1552     mov 7fh,#20                     ;vonese 2x1.5x20=60us
0AA4 120AA8           1553     lcall vonesa
0AA7 22               1554     ret
                      1555
                      1556     vonesa:                         ;vonese ne baze te vleres ne regjistrin 20h
0AA8 D57FFD           1557     djnz 7fh,vonesa
0AAB 22               1558     ret
                      1559
                      1560     readromfromslave:
                      1561
0AAC 120AD5           1562     lcall read_byte                 ;family code 28h
0AAF F55F             1563     mov 5fh,a
0AB1 120AD5           1564     lcall read_byte
0AB4 F560             1565     mov 60h,a
0AB6 120AD5           1566     lcall read_byte
0AB9 F561             1567     mov 61h,a
0ABB 120AD5           1568     lcall read_byte
0ABE F562             1569     mov 62h,a
0AC0 120AD5           1570     lcall read_byte
0AC3 F563             1571     mov 63h,a
0AC5 120AD5           1572     lcall read_byte
0AC8 F564             1573     mov 64h,a
0ACA 120AD5           1574     lcall read_byte
0ACD F565             1575     mov 65h,a
0ACF 120AD5           1576     lcall read_byte
0AD2 F566             1577     mov 66h,a                       ;crc rom nga slave
                      1578
0AD4 22               1579     ret
                      1580
                      1581
                      1582     read_byte:                      ;funskioni per leximin e nje bajti
                      1583
                      1584
0AD5 7B08             1585     mov r3,#8                       ;unaze qe perseritet 8here pra per 8bita
0AD7 7400             1586     mov a,#00h                      ;inicializim i accumulator-it
                      1587     u1:
0AD9 120AE0           1588     lcall read_bit                  ;thirret funksioni per ruajtjen e bitave
0ADC 13               1589     rrc a                           ;biti qe gjendet ne C kalon ne vendin e MSB ne A
0ADD DBFA             1590     djnz r3,u1
                      1591
0ADF 22               1592     ret
                      1593
                      1594
                      1595     read_bit:                       ;funksioni per leximin e nje biti
                      1596
0AE0 C0E0             1597     push acc
0AE2 C2B3             1598     clr bustherm                    ;busi vlere 0
0AE4 00               1599     nop
0AE5 00               1600     nop
0AE6 00               1601     nop
0AE7 D2B3             1602     setb bustherm                   ;busi vlere 1
0AE9 757F02           1603     mov 7fh,#2                      ;vonesa 6us
0AEC 120AA8           1604     lcall vonesa
0AEF A2B3             1605     mov c,bustherm                  ;vlera qe vie ne bus nga slave ruhet ne C
0AF1 757F14           1606     mov 7fh,#20                     ;vonese 60us
0AF4 120AA8           1607     lcall vonesa
0AF7 D0E0             1608     pop acc
0AF9 22               1609     ret
                      1610
                      1611     matchrom:
0AFA 7455             1612     mov a,#55h                      ;funksioni matchrom nenkupton nje komand te rom-it te ds18b20
                      1613                                     ;komanda matchrom qe duhet te inicohet kurdo qe i adresomi ndonjerit
0AFC 120A80           1614     lcall thwrite
0AFF E55F             1615     mov a,5fh
0B01 120A80           1616     lcall thwrite
0B04 E560             1617     mov a,60h
0B06 120A80           1618     lcall thwrite
0B09 E561             1619     mov a,61h
0B0B 120A80           1620     lcall thwrite
0B0E E562             1621     mov a,62h
0B10 120A80           1622     lcall thwrite
0B13 E563             1623     mov a,63h
0B15 120A80           1624     lcall thwrite
0B18 E564             1625     mov a,64h
0B1A 120A80           1626     lcall thwrite
0B1D E565             1627     mov a,65h
0B1F 120A80           1628     lcall thwrite
0B22 E566             1629     mov a,66h
0B24 120A80           1630     lcall thwrite
                      1631
0B27 22               1632     ret
                      1633
                      1634     scratchpadread:                 ;funskioni per leximin e memories se brendshme te ds18b20
0B28 74BE             1635     mov a,#0beh
0B2A 120A80           1636     lcall thwrite
0B2D 00               1637     nop
0B2E 120AD5           1638     lcall read_byte
0B31 F567             1639     mov 67h,a                       ;LSB i temperatures ruhet ne 27h regjisterin
0B33 120AD5           1640     lcall read_byte
0B36 F568             1641     mov 68h,a                       ;MSB i temperatures ruhet ne 28h regjistrin
0B38 120AD5           1642     lcall read_byte
0B3B F569             1643     mov 69h,a                       ;Vlera e TH regjistrit ruhet ne 29h regjistrin
0B3D 120AD5           1644     lcall read_byte
0B40 F56A             1645     mov 6ah,a                       ;Vlera e TL regjistrit ruhet ne 2ah regjistrin
0B42 120AD5           1646     lcall read_byte
0B45 F56B             1647     mov 6bh,a                       ;Vlera e configuration register ruhet ne 2bh regjistrin
0B47 120AD5           1648     lcall read_byte
0B4A F56C             1649     mov 6ch,a
0B4C 120AD5           1650     lcall read_byte
0B4F F56D             1651     mov 6dh,a
0B51 120AD5           1652     lcall read_byte
0B54 F56E             1653     mov 6eh,a
0B56 120AD5           1654     lcall read_byte
0B59 F56F             1655     mov 6fh,a                       ;byte 8 , byte i fundit i scratchpad-it, vlera e CRC e cila ruhet ne
0B5B 22               1656     ret
                      1657
                      1658
                      1659     converteddelay:                 ;vonese kur nevojitet komanda convert T per resoulucion 9 bitsh koha
                      1660                                     ;vonesa reale eshte 99ms
                      1661
0B5C 7801             1662     mov r0,#01
                      1663     l3:
0B5E 7925             1664     mov r1,#37
                      1665     l2:
0B60 7A64             1666     mov r2,#100
                      1667     l1:
0B62 DAFE             1668     djnz r2,l1                      ;vonese 100x1.5x2=300us
0B64 D9FA             1669     djnz r1,l2                      ;vonese 037x1.5x2=111us
0B66 D8F6             1670     djnz r0,l3                      ;vonese 001x1.5x2=003us
                      1671
0B68 22               1672     ret
                      1673
                      1674
                      1675
                      1676
                      1677     ;====================================================================================================
                      1678     crc_generator_modbus:
                      1679
                      1680
                      1681     crcregister equ a               ;A perdoret si regjistri per ruajtejen e crc pergjate tere procedures
0B69 E5FF             1682     mov crcregister,0ffh    ;??     ;A inicializohet si FFh
0B6B 6567             1683     xrl a,67h                       ;x or logic crcregister me bytin e pare te scratchpadit
0B6D 75F008           1684     mov b,#8                        ;sherben per te treguar 8 shiftime
                      1685     a1:
0B70 C3               1686     clr c                           ;gjate  shiftimit msb-ja e crcregjistrin duhet te jet 0
0B71 13               1687     rrc a                           ;lsb e A pas shiftim kalon ne carry bit
0B72 D5F0FB           1688     djnz b,a1
0B75 50F9             1689     jnc a1                          ;kontrollohet vlera e bitit te shiftuar te A, pra lsb-s paraprake
0B77 655D             1690     xrl a,crcpolynom1wire           ;nese lsb ka qene 1 ateher kerkohen x or logic i crcs me polinomin e
                      1691     ;
0B79 6568             1692     xrl a,68h
0B7B 75F008           1693     mov b,#8
                      1694     a2:
0B7E C3               1695     clr c
0B7F 13               1696     rrc a
0B80 D5F0FB           1697     djnz b,a2
0B83 50F9             1698     jnc a2
0B85 655D             1699     xrl a,crcpolynom1wire
                      1700     ;
0B87 6569             1701     xrl a,69h
0B89 75F008           1702     mov b,#8
                      1703     a3:
0B8C C3               1704     clr c
0B8D 13               1705     rrc a
0B8E D5F0FB           1706     djnz b,a3
0B91 50F9             1707     jnc a3
0B93 655D             1708     xrl a,crcpolynom1wire
                      1709
0B95 656A             1710     xrl a,6ah
0B97 75F008           1711     mov b,#8
                      1712     a4:
0B9A C3               1713     clr c
0B9B 13               1714     rrc a
0B9C D5F0FB           1715     djnz b,a4
0B9F 50F9             1716     jnc a4
0BA1 655D             1717     xrl a,crcpolynom1wire
                      1718     ;
                      1719
0BA3 656B             1720     xrl a,6bh
0BA5 75F008           1721     mov b,#8
                      1722     a5:
0BA8 C3               1723     clr c
0BA9 13               1724     rrc a
0BAA D5F0FB           1725     djnz b,a5
0BAD 50F9             1726     jnc a5
0BAF 655D             1727     xrl a,crcpolynom1wire
                      1728     ;
0BB1 656C             1729     xrl a,6ch
0BB3 75F008           1730     mov b,#8
                      1731     a6:
0BB6 C3               1732     clr c
0BB7 13               1733     rrc a
0BB8 D5F0FB           1734     djnz b,a6
0BBB 50F9             1735     jnc a6
0BBD 655D             1736     xrl a,crcpolynom1wire
                      1737     ;
0BBF 656D             1738     xrl a,6dh
0BC1 75F008           1739     mov b,#8
                      1740     a7:
0BC4 C3               1741     clr c
0BC5 13               1742     rrc a
0BC6 D5F0FB           1743     djnz b,a7
0BC9 50F9             1744     jnc a7
0BCB 655D             1745     xrl a,crcpolynom1wire
                      1746     ;
0BCD 656E             1747     xrl a,6eh
0BCF 75F008           1748     mov b,#8
                      1749     a8:
0BD2 C3               1750     clr c
0BD3 13               1751     rrc a
0BD4 D5F0FB           1752     djnz b,a8
0BD7 50F9             1753     jnc a8
0BD9 655D             1754     xrl a,crcpolynom1wire
0BDB F57E             1755     mov 7eh,a
0BDD 22               1756     ret
                      1757
                      1758     ;======================================================================
                      1759     ;funksioni per gjenerimin e crc nga masteri per polinomin x8+x5+x4+1
                      1760     ;======================================================================
                      1761
                      1762     crc_1wire_generator:
0BDE C0E0             1763     push acc
0BE0 C0F0             1764     push b
0BE2 C0E0             1765     push acc
0BE4 75F008           1766     mov b,#8
                      1767     crcloop:
0BE7 655E             1768     xrl a,crc
0BE9 13               1769     rrc a
0BEA E55E             1770     mov a,crc
0BEC 5002             1771     jnc zero
0BEE 6418             1772     xrl a,#18h
                      1773     zero:
0BF0 13               1774     rrc a
0BF1 F55E             1775     mov crc,a
0BF3 D0E0             1776     pop acc
0BF5 03               1777     rr a
0BF6 C0E0             1778     push acc
0BF8 D5F0EC           1779     djnz b,crcloop
0BFB D0E0             1780     pop acc
0BFD D0F0             1781     pop b
0BFF D0E0             1782     pop acc
0C01 22               1783     ret
                      1784
                      1785     ;=======================================================================================
                      1786     ; Vendosja e temperatures se lexuar nga sensori ne 7-segmentesh
                      1787     ;======================================================================================
                      1788     temp_to_7segment:
0C02 C3               1789     clr c
0C03 E568             1790     mov a,68h
0C05 33               1791     rlc a
0C06 402A             1792     jc negative
                      1793
0C08 33               1794     rlc a
0C09 33               1795     rlc a
0C0A 33               1796     rlc a
0C0B 33               1797     rlc a
0C0C 33               1798     rlc a
0C0D 92F6             1799     mov b.6,c
0C0F 33               1800     rlc a
0C10 92F5             1801     mov b.5,c
0C12 33               1802     rlc a
0C13 92F4             1803     mov b.4,c
                      1804
0C15 E567             1805     mov a,67h
0C17 33               1806     rlc a
0C18 92F3             1807     mov b.3,c
0C1A 33               1808     rlc a
0C1B 92F2             1809     mov b.2,c
0C1D 33               1810     rlc a
0C1E 92F1             1811     mov b.1,c
0C20 33               1812     rlc a
0C21 92F0             1813     mov b.0,c
                      1814
0C23 8000             1815     sjmp rutinadis0
                      1816
                      1817     rutinadis0:
0C25 33               1818     rlc a
0C26 5005             1819     jnc zeroo
0C28 786D             1820     mov r0,#01101101b
0C2A 020C6E           1821     ljmp rutinadis3pozitive
                      1822     zeroo:
0C2D 783F             1823     mov r0,#00111111b
0C2F 020C6E           1824     ljmp rutinadis3pozitive
                      1825
                      1826     negative:
0C32 7B40             1827     mov r3,#01000000b
0C34 33               1828     rlc a
0C35 33               1829     rlc a
0C36 33               1830     rlc a
0C37 33               1831     rlc a
0C38 33               1832     rlc a
0C39 92F6             1833     mov b.6,c
0C3B 33               1834     rlc a
0C3C 92F5             1835     mov b.5,c
0C3E 33               1836     rlc a
0C3F 92F4             1837     mov b.4,c
                      1838
0C41 E567             1839     mov a,67h
0C43 33               1840     rlc a
0C44 92F3             1841     mov b.3,c
0C46 33               1842     rlc a
0C47 92F2             1843     mov b.2,c
0C49 33               1844     rlc a
0C4A 92F1             1845     mov b.1,c
0C4C 33               1846     rlc a
0C4D 92F0             1847     mov b.0,c
                      1848
0C4F 33               1849     rlc a
0C50 5002             1850     jnc zeroo0
0C52 786D             1851     mov r0,#01101101b
                      1852     zeroo0:
0C54 783F             1853     mov r0,#00111111b
                      1854
0C56 E5F0             1855     mov a,b
0C58 75F040           1856     mov b,#01000000b
0C5B 95F0             1857     subb a,b
0C5D 75F00A           1858     mov b,#10
0C60 84               1859     div ab
                      1860
                      1861     rutinadis2negative:
                      1862
0C61 120A4F           1863     lcall number_to_7seg
0C64 FA               1864     mov r2, a
                      1865
                      1866     zzz2:           ;rutina dis1negative
                      1867
0C65 E5F0             1868     mov a,b
                      1869
                      1870
0C67 120A4F           1871     lcall number_to_7seg
0C6A F9               1872     mov r1, a
0C6B 020C90           1873     ljmp zzz1
                      1874
                      1875
                      1876
                      1877     rutinadis3pozitive:
                      1878
                      1879
0C6E E5F0             1880     mov a,b
0C70 75F064           1881     mov b,#100
0C73 84               1882     div ab
                      1883     kss:
0C74 B40004           1884     cjne a,#00h,af0
0C77 7B00             1885     mov r3,#00h
0C79 8005             1886     sjmp rutinadis2
                      1887     af0:
0C7B B401F6           1888     cjne a,#01h,kss
0C7E 7B06             1889     mov r3,#00000110b
                      1890
                      1891     rutinadis2:
0C80 E5F0             1892     mov a,b
0C82 75F00A           1893     mov b,#10
0C85 84               1894     div ab
                      1895
0C86 120A4F           1896     lcall number_to_7seg
0C89 FA               1897     mov r2, a
                      1898
                      1899     zzz:                    ;rutinadis1
0C8A E5F0             1900     mov a,b
                      1901
0C8C 120A4F           1902     lcall number_to_7seg
0C8F F9               1903     mov r1, a
                      1904     zzz1:
                      1905
0C90 8837             1906     mov dis_0,r0
0C92 7480             1907     mov a, #10000000b
0C94 49               1908     orl a, r1
0C95 F538             1909     mov dis_1,a
0C97 8A39             1910     mov dis_2,r2
0C99 8B3A             1911     mov dis_3,r3
                      1912
0C9B 22               1913     RET
                      1914
                      1915     ;----------------------------------------------------------------------------------------------------
                      1916     ; Impelementimi i MODBUS protokollit
                      1917     ;======================================================================
                      1918     ;                       INTERAPTI I TAJMERIT
                      1919     ;======================================================================
                      1920     TMR0VEC:
0C9C C0D0             1921             PUSH PSW
0C9E C003             1922             PUSH 03H
0CA0 C2D3             1923             CLR RS0
                      1924
                      1925
0CA2 C28C             1926             CLR TR0                 ;ndalet tajmeri
0CA4 AB5A             1927             MOV R3 , GjendjaModbus
0CA6 BB0108           1928             CJNE R3,#01H,TOJO1
0CA9 755A02           1929             MOV GjendjaModbus , #02H
                      1930
0CAC D003             1931             POP 03H
0CAE D0D0             1932             POP PSW
0CB0 32               1933                     RETI
                      1934     TOJO1:
                      1935     TOJO2:
0CB1 BB0314           1936             CJNE R3,#03H,TOJO3
0CB4 755A04           1937             MOV GjendjaModbus , #04H
0CB7 C28C             1938             CLR TR0                         ;ndalet tajmeri0
0CB9 C28D             1939             CLR TF0                         ;fshihet flagu
0CBB 758C3C           1940             MOV TH0,#HIGH t20
0CBE 758A06           1941             MOV TL0,#LOW t20
0CC1 D28C             1942             SETB TR0
                      1943
0CC3 D003             1944             POP 03H
0CC5 D0D0             1945             POP PSW
0CC7 32               1946                     RETI
                      1947
                      1948     TOJO3:
0CC8 BB0427           1949             CJNE R3,#04H,TOJO4
                      1950
0CCB C0E0             1951             PUSH ACC
0CCD C0F0             1952             PUSH B
0CCF C000             1953             PUSH 00H
0CD1 C001             1954             PUSH 01H
0CD3 C002             1955             PUSH 02H
0CD5 C004             1956             PUSH 04H
0CD7 C005             1957             PUSH 05H
0CD9 C006             1958             PUSH 06H
0CDB C007             1959             PUSH 07H
                      1960
0CDD 120DA2           1961             CALL ANALIZA
                      1962
0CE0 D007             1963             POP 07H
0CE2 D006             1964             POP 06H
0CE4 D005             1965             POP 05H
0CE6 D004             1966             POP 04H
0CE8 D002             1967             POP 02H
0CEA D001             1968             POP 01H
0CEC D000             1969             POP 00H
0CEE D0F0             1970             POP B
0CF0 D0E0             1971             POP ACC
                      1972     TOJO4:
0CF2 D003             1973             POP 03H
0CF4 D0D0             1974             POP PSW
0CF6 32               1975                     RETI
                      1976
                      1977     ;======================================================================
                      1978     ;                               RX INTERAPTI
                      1979     ;======================================================================
                      1980     SERVEC:
0CF7 C0D0             1981             PUSH PSW
0CF9 C0E0             1982             PUSH ACC
0CFB C0F0             1983             PUSH B
0CFD C000             1984             PUSH 00H
0CFF C003             1985             PUSH 03H
0D01 C2D3             1986             CLR RS0
                      1987
0D03 AB5A             1988             MOV R3 ,  GjendjaModbus
0D05 209830           1989             JB RI,RX
0D08 E55B             1990             MOV A,CounterModbus                     ;rutina per dergim
0D0A B55913           1991             CJNE A,GjendjaDergimit,NEXTCH           ;r2=02h
0D0D 755A02           1992             MOV GjendjaModbus , #02H
0D10 755B00           1993             MOV CounterModbus , #00H
                      1994
0D13 D003             1995             POP 03H
0D15 D000             1996             POP 00H
0D17 D0F0             1997             POP B
0D19 D0E0             1998             POP ACC
0D1B D0D0             1999             POP PSW
0D1D C299             2000             CLR TI
0D1F 32               2001                     RETI
                      2002
                      2003     NEXTCH:
0D20 7870             2004             MOV R0,#StartAddress
0D22 E8               2005             MOV A , R0
0D23 2559             2006             ADD A , GjendjaDergimit
0D25 F8               2007             MOV R0 , A
0D26 E6               2008             MOV A , @R0
                      2009
0D27 F599             2010             MOV SBUF,A
0D29 0559             2011             INC GjendjaDergimit
                      2012
0D2B D003             2013             POP 03H
0D2D D000             2014             POP 00H
0D2F D0F0             2015             POP B
0D31 D0E0             2016             POP ACC
0D33 D0D0             2017             POP PSW
0D35 C299             2018             CLR TI
0D37 32               2019                     RETI
                      2020
                      2021     RX:
0D38 C298             2022             CLR RI
0D3A BB0115           2023             CJNE R3,#01H,RXJO1
0D3D C28C             2024             CLR TR0
0D3F 758CF0           2025             MOV TH0,#HIGH t35
0D42 758A56           2026             MOV TL0,#LOW t35
0D45 D28C             2027             SETB TR0
                      2028
0D47 D003             2029             POP 03H
0D49 D000             2030             POP 00H
0D4B D0F0             2031             POP B
0D4D D0E0             2032             POP ACC
0D4F D0D0             2033             POP PSW
0D51 32               2034                     RETI
                      2035
                      2036     RXJO1:
0D52 BB022B           2037             CJNE R3,#02H,RXJO2
0D55 755B00           2038             MOV CounterModbus , #00H                        ;fshihet bufferi duke u pozicionuar ne 0 pas
                      2039
                      2040     RXGJ2:
0D58 C28C             2041             CLR TR0
0D5A C28D             2042             CLR TF0                         ;flagu i tajmerit0
0D5C 758CF9           2043             MOV TH0,#HIGH t15
0D5F 758A49           2044             MOV TL0,#LOW t15
0D62 D28C             2045             SETB TR0
0D64 755A03           2046             MOV GjendjaModbus , #03H
0D67 E599             2047             MOV A,SBUF                      ;shkrimi ne buffer
                      2048
0D69 F5F0             2049             mov B , A
0D6B 7470             2050             mov A ,#StartAddress
0D6D 255B             2051             ADD A , CounterModbus
0D6F F8               2052             mov R0 , A
0D70 E5F0             2053             MOV A , B
0D72 F6               2054             mov @R0, A
                      2055
0D73 055B             2056             INC CounterModbus
                      2057
0D75 D003             2058             POP 03H
0D77 D000             2059             POP 00H
0D79 D0F0             2060             POP B
0D7B D0E0             2061             POP ACC
0D7D D0D0             2062             POP PSW
0D7F 32               2063                     RETI
                      2064
                      2065     RXJO2:
0D80 BB0302           2066             CJNE R3,#03H,RXJO3
0D83 80D3             2067             SJMP RXGJ2
                      2068     RXJO3:
0D85 BB040F           2069             CJNE R3,#04H,RXJO4
0D88 C28C             2070             CLR TR0
0D8A C28D             2071             CLR TF0
0D8C 758CF0           2072             MOV TH0,#HIGH t35
0D8F 758A56           2073             MOV TL0,#LOW t35
0D92 D28C             2074             SETB TR0
0D94 755A01           2075             MOV GjendjaModbus , #01H
                      2076
                      2077     RXJO4:
0D97 D003             2078             POP 03H
0D99 D000             2079             POP 00H
0D9B D0F0             2080             POP B
0D9D D0E0             2081             POP ACC
0D9F D0D0             2082             POP PSW
0DA1 32               2083                     RETI
                      2084     ;======================================================================
                      2085     ;                               ANALIZA
                      2086     ;======================================================================
                      2087     ANALIZA:
0DA2 E55B             2088             MOV A,CounterModbus
0DA4 FF               2089             MOV R7,A                        ;R7=R4 por ndyshon ne 0 gjate kalkulimit teCRC
0DA5 1F               2090             DEC R7                          ;zvoglojme per 2(e hjekim crc ngamesazhi)
0DA6 1F               2091             DEC R7
0DA7 120EA1           2092             CALL CALC_CRC
                      2093     ;krahsimi i crc
                      2094
0DAA 7470             2095             MOV A,#StartAddress
0DAC 2F               2096             ADD A , R7
0DAD F8               2097             MOV R0 , A
0DAE E6               2098             MOV A , @R0
                      2099
                      2100
0DAF B50D0E           2101             CJNE A,CRC_ACCUM_LOW,ANALEND    ;shkon ne analend nese crcgabim
                      2102
0DB2 08               2103             INC R0
0DB3 E6               2104             MOV A , @R0
                      2105
                      2106
0DB4 B50E09           2107             CJNE A,CRC_ACCUM_HI,ANALEND     ;shkon ne analend nese crc gabim
                      2108     ;fundi i krahasimit (CRC-OK)
                      2109     ;krahasimi i adreses
                      2110
0DB7 7870             2111             MOV R0 , #StartAddress
0DB9 E6               2112             MOV A ,@R0
                      2113
0DBA B40103           2114             CJNE A,#01H,ANALEND
0DBD 020DC3           2115             JMP FUNKS
                      2116     ANALEND:
0DC0 020E5C           2117             JMP ANALEND2
                      2118
                      2119     ;fundi i krahasimit(AdresaOK)
                      2120     ;======================================================================
                      2121     ;                       FUNKSIONI
                      2122     ;======================================================================
                      2123     FUNKS:
0DC3 7871             2124             MOV R0 , #StartAddress+1
0DC5 E6               2125             MOV A , @R0
                      2126
0DC6 B4032F           2127             CJNE A,#3,JOFO3
                      2128     FO3:
0DC9 08               2129             INC R0
0DCA E6               2130             MOV A , @R0
                      2131
0DCB 6003             2132             JZ FO3_01
0DCD 020E6F           2133             JMP STADDERR
                      2134
                      2135     FO3_01:
0DD0 08               2136             INC R0
0DD1 E6               2137             MOV A , @R0
                      2138
0DD2 FE               2139             MOV R6,A
0DD3 C3               2140             CLR C
0DD4 9420             2141             SUBB A,#HREGNUM                 ;numri total i regjistrave
0DD6 4003             2142             JC FO3_02
0DD8 020E6F           2143             JMP STADDERR
                      2144
                      2145     FO3_02:
0DDB 08               2146             INC R0
0DDC E6               2147             MOV A , @R0
                      2148
0DDD 6003             2149             JZ FO3_03
0DDF 020E5D           2150             JMP VALERR
                      2151
                      2152     FO3_03:
0DE2 08               2153             INC R0
0DE3 E6               2154             MOV A , @R0
                      2155
0DE4 FD               2156             MOV R5,A
0DE5 14               2157             DEC A
0DE6 2E               2158             ADD A,R6
0DE7 C3               2159             CLR C
0DE8 9420             2160             SUBB A,#HREGNUM                 ;numri total i regjistrave
0DEA 4003             2161             JC FO3_04
0DEC 020E5D           2162             JMP VALERR
                      2163
                      2164     FO3_04:
0DEF 755B02           2165             MOV CounterModbus,#02H
0DF2 120EE5           2166             CALL READREG
0DF5 020E81           2167             JMP SENDMSG
                      2168
                      2169     JOFO3:
0DF8 B40403           2170             CJNE A,#4,JOFO4
                      2171     FO4:
0DFB 020DC9           2172             JMP FO3
                      2173
                      2174     JOFO4:
0DFE B40617           2175             CJNE A,#6,JOFO6
                      2176
                      2177     FO6:
0E01 08               2178             INC R0
0E02 E6               2179             MOV A , @R0
                      2180
0E03 B4000F           2181             CJNE A,#0,FO6_E1
                      2182
0E06 08               2183             INC R0
0E07 E6               2184             MOV A , @R0
                      2185
0E08 FE               2186             MOV R6,A
0E09 C3               2187             CLR C
0E0A 9420             2188             SUBB A,#HREGNUM                 ;numri total i regjistrave=hregnum
0E0C 5007             2189             JNC FO6_E1
                      2190
0E0E 08               2191             INC R0
                      2192
                      2193
0E0F 120ED3           2194             CALL PRESREG
0E12 020E9B           2195             JMP SENDMSG1
                      2196
                      2197     FO6_E1:
0E15 020E6F           2198             JMP STADDERR
                      2199
                      2200     JOFO6:
0E18 B4102F           2201             CJNE A,#16,JOFO16
                      2202
                      2203     FO16:
0E1B 08               2204             INC R0
0E1C E6               2205             MOV A , @R0
                      2206
0E1D 6003             2207             JZ FO16_01
0E1F 020E6F           2208             JMP STADDERR
                      2209
                      2210     FO16_01:
0E22 08               2211             INC R0
0E23 E6               2212             MOV A , @R0
                      2213
0E24 FE               2214             MOV R6,A
0E25 C3               2215             CLR C
0E26 9420             2216             SUBB A,#HREGNUM                 ;numri total i regjistrave
0E28 4003             2217             JC FO16_02
0E2A 020E6F           2218             JMP STADDERR
                      2219
                      2220     FO16_02:
0E2D 08               2221             INC R0
0E2E E6               2222             MOV A , @R0
                      2223
0E2F 6003             2224             JZ FO16_03
0E31 020E5D           2225             JMP VALERR
                      2226
                      2227     FO16_03:
0E34 08               2228             INC R0
0E35 E6               2229             MOV A , @R0
                      2230
0E36 FD               2231             MOV R5,A
0E37 14               2232             DEC A
0E38 2E               2233             ADD A,R6
0E39 C3               2234             CLR C
0E3A 9420             2235             SUBB A,#HREGNUM                 ;numri total i regjistrave
0E3C 4003             2236             JC FO16_04
0E3E 020E5D           2237             JMP VALERR
                      2238
                      2239     FO16_04:
0E41 755B06           2240             MOV CounterModbus ,#06H
0E44 120F0B           2241             CALL PRESMREG
0E47 020E81           2242             JMP SENDMSG
                      2243
                      2244     JOFO16:
                      2245     ;=================================Funksioni i ardhur gabim==============================;FUNCERR:
0E4A 7470             2246             MOV A,#StartAddress
0E4C 2401             2247             ADD A , #01
0E4E F8               2248             MOV R0 , A
0E4F E6               2249             MOV A , @R0
                      2250
0E50 D2E7             2251             SETB ACC.7
                      2252
0E52 F6               2253             MOV @R0 , A
0E53 08               2254             INC R0
                      2255
0E54 7401             2256             MOV A,#01H
                      2257
0E56 F6               2258             MOV @R0 , A
                      2259
0E57 7C03             2260             MOV R4,#03H
0E59 020E81           2261             JMP SENDMSG
                      2262
                      2263     ANALEND2:
0E5C 22               2264             RET                             ;kthehet ne ANALIZA nga TOJO3
                      2265
                      2266     ;============================Vlera e ardhur gabim======================================;
                      2267     VALERR:
0E5D 7470             2268             MOV A,#StartAddress
0E5F 2401             2269             ADD A , #01
0E61 F8               2270             MOV R0 , A
0E62 E6               2271             MOV A , @R0
                      2272
0E63 D2E7             2273             SETB ACC.7
                      2274
0E65 F6               2275             MOV @R0 , A
0E66 08               2276             INC R0
                      2277
0E67 7403             2278             MOV A,#03H
                      2279
0E69 F6               2280             MOV @R0 , A
                      2281
0E6A 7C03             2282             MOV R4,#03H
0E6C 020E81           2283             JMP SENDMSG
                      2284
                      2285     ;============================Adresa e ardhur gabim==================================;
                      2286     STADDERR:
0E6F 7470             2287             MOV A,#StartAddress
0E71 2401             2288             ADD A , #01
0E73 F8               2289             MOV R0 , A
0E74 E6               2290             MOV A , @R0
                      2291
0E75 D2E7             2292             SETB ACC.7
                      2293
0E77 F6               2294             MOV @R0 , A
0E78 08               2295             INC R0
                      2296
0E79 7402             2297             MOV A,#02H
                      2298
0E7B F6               2299             MOV @R0 , A
                      2300
0E7C 7C03             2301             MOV R4,#03H
0E7E 020E81           2302             JMP SENDMSG
                      2303
                      2304     SENDMSG:
0E81 F5F0             2305             MOV B , A
0E83 7470             2306             mov A ,#StartAddress
0E85 255B             2307             ADD A , CounterModbus
0E87 F8               2308             mov R0 , A
0E88 E5F0             2309             MOV A , B
                      2310
0E8A 855B07           2311             MOV 07H,CounterModbus
0E8D 120EA1           2312             CALL CALC_CRC
0E90 E50D             2313             MOV A,0DH
                      2314
0E92 F6               2315             MOV @R0 , A
0E93 08               2316             INC R0
                      2317
0E94 E50E             2318             MOV A,0EH
0E96 F6               2319             MOV @R0 , A
                      2320
0E97 055B             2321             INC CounterModbus
0E99 055B             2322             INC CounterModbus
                      2323     ;==========================Dergo mesazhin e njejt qe ka ardhur ==========================;
                      2324     SENDMSG1:                               ;reply i njejte tx=rx pa llogaritje
0E9B 755900           2325             MOV GjendjaDergimit,#0                  ;te CRC-se
0E9E D299             2326             SETB TI
                      2327
0EA0 22               2328                     RET
                      2329
                      2330     CALC_CRC:
                      2331     ;kalkulon crc ne karakteret e shkruar ne memorie extprej4000h dherezulratin
                      2332     ;e vendose ne 0D,0E praR5,R6banka1
                      2333     ;perdore R4=numri char te pranuar,R7=R4=DPL pastaj behet 0 dhe R6=8bitne bajt
                      2334
0EA1 750DFF           2335             MOV CRC_ACCUM_LOW,#0FFH         ;fshihet crc accum para fillimit
0EA4 750EFF           2336             MOV CRC_ACCUM_HI,#0FFH
                      2337
0EA7 7870             2338             MOV R0 ,#StartAddress
0EA9 8FF0             2339             MOV B , R7
                      2340
                      2341      ;push 07H ;e ruajm R7=07H direkt
                      2342     ; XOR bajti i pare me bajtin e ulet te CRC
                      2343     ;
                      2344     CC10:
0EAB E6               2345             MOV A , @R0
                      2346
0EAC 650D             2347             XRL A,CRC_ACCUM_LOW
0EAE F50D             2348             MOV CRC_ACCUM_LOW,A
0EB0 7E08             2349             MOV R6,#8                       ;R6 sherben si numrues i 8 bitave ne bajt
                      2350     CC20:
0EB2 E50E             2351             MOV A , CRC_ACCUM_HI            ;merret bajti i larte
0EB4 C3               2352             CLR C                           ;mbushet me 0
0EB5 13               2353             RRC A                           ;shiftohet djathtas
0EB6 F50E             2354             MOV CRC_ACCUM_HI , A
0EB8 E50D             2355             MOV A , CRC_ACCUM_LOW           ;dhe per bajtin e ulet
0EBA 13               2356             RRC A                           ;shiftohet djathtas
0EBB F50D             2357             MOV CRC_ACCUM_LOW,A
0EBD 500C             2358             JNC CC30
0EBF E50D             2359             MOV A , CRC_ACCUM_LOW
0EC1 6401             2360             XRL A , #CRC_MASK_LSB
0EC3 F50D             2361             MOV CRC_ACCUM_LOW , A
0EC5 E50E             2362             MOV A , CRC_ACCUM_HI
0EC7 64A0             2363             XRL A , #CRC_MASK_MSB
0EC9 F50E             2364             MOV CRC_ACCUM_HI , A
                      2365
                      2366     CC30:
0ECB DEE5             2367             DJNZ R6 , CC20                  ;perseritet tete here
0ECD 08               2368             INC R0
                      2369
0ECE DFDB             2370             DJNZ R7 , CC10                  ;nje bajt me pak per te llogarite
                      2371             ;pop 07H
0ED0 AFF0             2372             MOV R7 , B
                      2373
0ED2 22               2374                      RET
                      2375
                      2376     ;preset i nje regjistri presreg
                      2377     PRESREG:
0ED3 EE               2378             MOV A,R6
0ED4 23               2379             RL A
0ED5 2420             2380             ADD A,#ShareMemory
0ED7 04               2381             INC A
0ED8 F9               2382             MOV R1,A  ;******************** R0 eshte bere R1
                      2383
0ED9 E6               2384             MOV A , @R0
                      2385
0EDA F7               2386             MOV @R1,A
0EDB 19               2387             DEC R1
0EDC 08               2388             INC R0
0EDD E6               2389             MOV A , @R0
                      2390
0EDE F7               2391             MOV @R1,A
0EDF E520             2392             MOV A,20H
0EE1 F4               2393             CPL A                   ;Bartja e regjistrit ne portin P1
0EE2 F590             2394             MOV P1,A                        ;Percaktimi i logjikes 1/0,on/off============================
                      2395
0EE4 22               2396                     RET
                      2397     ;readreg
                      2398     ;leximi i regjistrave
                      2399     ;R6 start adress,R5 count
                      2400     ;=============================== Lexo regjister =========================================;
                      2401     READREG:
0EE5 1200A1           2402             lcall dergo_pc          ;rutina qe vendos vlerat e tensionit dhe temperatures per bartje ne P
                      2403
                      2404
0EE8 ED               2405             MOV A,R5
0EE9 23               2406             RL A
                      2407
0EEA F5F0             2408             MOV B , A
0EEC 7470             2409             mov A ,#StartAddress
0EEE 255B             2410             ADD A , CounterModbus
0EF0 F8               2411             mov R0 , A
0EF1 E5F0             2412             MOV A , B
0EF3 F6               2413             mov @R0, A
0EF4 08               2414             INC R0
                      2415
0EF5 055B             2416             INC CounterModbus
0EF7 EE               2417             MOV A,R6
0EF8 2420             2418             ADD A,#ShareMemory
0EFA F9               2419             MOV R1,A                        ;Ndryshim R0 eshte bere R1
                      2420
                      2421     RR_00:
                      2422
0EFB 7400             2423             MOV A,#00
0EFD F6               2424             MOV @R0 , A
0EFE 08               2425             INC R0
                      2426
0EFF 055B             2427             INC CounterModbus
0F01 E7               2428             MOV A,@R1
                      2429
0F02 F6               2430             MOV @R0 , A
0F03 08               2431             INC R0
                      2432
0F04 055B             2433             INC CounterModbus
0F06 0501             2434             INC 01H
0F08 DDF1             2435             DJNZ R5,RR_00
                      2436
0F0A 22               2437                     RET
                      2438
                      2439     ;presreg=preset register
                      2440     ;shkruarja e regjistrave
                      2441     ;R6 start adress,R5 count
                      2442
                      2443     ;=========================== Shkruaj ne disa regjistra ====================================;
                      2444     PRESMREG:
                      2445
                      2446
0F0B 7470             2447             MOV A ,#StartAddress
0F0D 255B             2448             ADD A , CounterModbus
0F0F F8               2449             MOV R0 , A
0F10 08               2450             INC R0                  ;R0 <- 7
0F11 EE               2451             MOV A,R6
0F12 2420             2452             ADD A,#ShareMemory
0F14 F9               2453             MOV R1,A
                      2454
                      2455     PMR_00:
0F15 08               2456             INC R0                  ;R0<-8
0F16 E6               2457             MOV A , @R0
                      2458
0F17 F7               2459             MOV @R1,A ;****************     ;R1 <- 20H
0F18 08               2460             INC R0                  ;
0F19 0501             2461             INC 01H
0F1B DDF8             2462             DJNZ R5,PMR_00 ;****************
                      2463
0F1D 22               2464     RET
                      2465
                      2466     END
ASSEMBLY COMPLETE, NO ERRORS FOUND, NO WARNINGS


SYMBOL TABLE:
??MCU_8051_IDE . . . . . . . . . . .  N  NUMB  8051H  NOT USED
??VERSION. . . . . . . . . . . . . .  N  NUMB  0149H  NOT USED
A1 . . . . . . . . . . . . . . . . .  C  ADDR  0B70H
A2 . . . . . . . . . . . . . . . . .  C  ADDR  0B7EH
A3 . . . . . . . . . . . . . . . . .  C  ADDR  0B8CH
A4 . . . . . . . . . . . . . . . . .  C  ADDR  0B9AH
A5 . . . . . . . . . . . . . . . . .  C  ADDR  0BA8H
A6 . . . . . . . . . . . . . . . . .  C  ADDR  0BB6H
A7 . . . . . . . . . . . . . . . . .  C  ADDR  0BC4H
A8 . . . . . . . . . . . . . . . . .  C  ADDR  0BD2H
AC . . . . . . . . . . . . . . . . .  B  ADDR  00D6H  NOT USED
ACC. . . . . . . . . . . . . . . . .  D  ADDR  00E0H
ACSR . . . . . . . . . . . . . . . .  D  ADDR  0097H  NOT USED
AD0H . . . . . . . . . . . . . . . .  N  NUMB  0071H
AD0L . . . . . . . . . . . . . . . .  N  NUMB  0072H
ADCF . . . . . . . . . . . . . . . .  D  ADDR  00F6H  NOT USED
ADCLK. . . . . . . . . . . . . . . .  D  ADDR  00F2H  NOT USED
ADCON. . . . . . . . . . . . . . . .  D  ADDR  00F3H  NOT USED
ADDH . . . . . . . . . . . . . . . .  D  ADDR  00F5H  NOT USED
ADDL . . . . . . . . . . . . . . . .  D  ADDR  00F4H  NOT USED
ADH. . . . . . . . . . . . . . . . .  N  NUMB  0044H
ADL. . . . . . . . . . . . . . . . .  N  NUMB  0045H
AF0. . . . . . . . . . . . . . . . .  C  ADDR  0C7BH
ANALEND. . . . . . . . . . . . . . .  C  ADDR  0DC0H
ANALEND2 . . . . . . . . . . . . . .  C  ADDR  0E5CH
ANALIZA. . . . . . . . . . . . . . .  C  ADDR  0DA2H
AUXR . . . . . . . . . . . . . . . .  D  ADDR  008EH  NOT USED
AUXR1. . . . . . . . . . . . . . . .  D  ADDR  00A2H  NOT USED
B. . . . . . . . . . . . . . . . . .  D  ADDR  00F0H
BDRCON . . . . . . . . . . . . . . .  D  ADDR  009BH  NOT USED
BDRCON_1 . . . . . . . . . . . . . .  D  ADDR  009CH  NOT USED
BRL. . . . . . . . . . . . . . . . .  D  ADDR  009AH  NOT USED
BUSTHERM . . . . . . . . . . . . . .  N  NUMB  00B3H
BUTTON_0 . . . . . . . . . . . . . .  B  ADDR  00A0H
BUTTON_0_7 . . . . . . . . . . . . .  N  NUMB  00A0H  NOT USED
BUTTON_1 . . . . . . . . . . . . . .  B  ADDR  00A1H
BUTTON_2 . . . . . . . . . . . . . .  B  ADDR  00A2H
BUTTON_3 . . . . . . . . . . . . . .  B  ADDR  00A3H
BUTTON_4 . . . . . . . . . . . . . .  B  ADDR  00A4H
BUTTON_5 . . . . . . . . . . . . . .  B  ADDR  00A5H
BUTTON_6 . . . . . . . . . . . . . .  B  ADDR  00A6H
BUTTON_7 . . . . . . . . . . . . . .  B  ADDR  00A7H
BUTTON_8 . . . . . . . . . . . . . .  B  ADDR  00B7H
BUTTON_9 . . . . . . . . . . . . . .  B  ADDR  00B6H
BUTTON_ESC . . . . . . . . . . . . .  B  ADDR  00B3H
BUTTON_NEXT. . . . . . . . . . . . .  B  ADDR  00B1H
BUTTON_OK. . . . . . . . . . . . . .  B  ADDR  00B2H
BYTETOBIT. . . . . . . . . . . . . .  C  ADDR  0A8FH
C0 . . . . . . . . . . . . . . . . .  N  NUMB  0047H
C1 . . . . . . . . . . . . . . . . .  N  NUMB  0048H
C1_JO9 . . . . . . . . . . . . . . .  C  ADDR  06B7H
C2 . . . . . . . . . . . . . . . . .  N  NUMB  0049H
C3 . . . . . . . . . . . . . . . . .  N  NUMB  004AH
C3_JO4 . . . . . . . . . . . . . . .  C  ADDR  0511H
CALC_CRC . . . . . . . . . . . . . .  C  ADDR  0EA1H
CC10 . . . . . . . . . . . . . . . .  C  ADDR  0EABH
CC20 . . . . . . . . . . . . . . . .  C  ADDR  0EB2H
CC30 . . . . . . . . . . . . . . . .  C  ADDR  0ECBH
CCAP0H . . . . . . . . . . . . . . .  D  ADDR  00FAH  NOT USED
CCAP0L . . . . . . . . . . . . . . .  D  ADDR  00EAH  NOT USED
CCAP1H . . . . . . . . . . . . . . .  D  ADDR  00FBH  NOT USED
CCAP1L . . . . . . . . . . . . . . .  D  ADDR  00EBH  NOT USED
CCAP2H . . . . . . . . . . . . . . .  D  ADDR  00FCH  NOT USED
CCAP3H . . . . . . . . . . . . . . .  D  ADDR  00FDH  NOT USED
CCAP4H . . . . . . . . . . . . . . .  D  ADDR  00FEH  NOT USED
CCAPL2H. . . . . . . . . . . . . . .  D  ADDR  00FCH  NOT USED
CCAPL2L. . . . . . . . . . . . . . .  D  ADDR  00ECH  NOT USED
CCAPL3H. . . . . . . . . . . . . . .  D  ADDR  00FDH  NOT USED
CCAPL3L. . . . . . . . . . . . . . .  D  ADDR  00EDH  NOT USED
CCAPL4H. . . . . . . . . . . . . . .  D  ADDR  00FEH  NOT USED
CCAPL4L. . . . . . . . . . . . . . .  D  ADDR  00EEH  NOT USED
CCAPM0 . . . . . . . . . . . . . . .  D  ADDR  00DAH  NOT USED
CCAPM1 . . . . . . . . . . . . . . .  D  ADDR  00DBH  NOT USED
CCAPM2 . . . . . . . . . . . . . . .  D  ADDR  00DCH  NOT USED
CCAPM3 . . . . . . . . . . . . . . .  D  ADDR  00DDH  NOT USED
CCAPM4 . . . . . . . . . . . . . . .  D  ADDR  00DEH  NOT USED
CCF0 . . . . . . . . . . . . . . . .  B  ADDR  00D8H  NOT USED
CCF1 . . . . . . . . . . . . . . . .  B  ADDR  00D9H  NOT USED
CCF2 . . . . . . . . . . . . . . . .  B  ADDR  00DAH  NOT USED
CCF3 . . . . . . . . . . . . . . . .  B  ADDR  00DBH  NOT USED
CCF4 . . . . . . . . . . . . . . . .  B  ADDR  00DCH  NOT USED
CCON . . . . . . . . . . . . . . . .  D  ADDR  00D8H  NOT USED
CFINT. . . . . . . . . . . . . . . .  C  ADDR  0033H  NOT USED
CH . . . . . . . . . . . . . . . . .  D  ADDR  00F9H  NOT USED
CI_B0_D0 . . . . . . . . . . . . . .  C  ADDR  06CEH
CI_B0_D1 . . . . . . . . . . . . . .  C  ADDR  0604H
CI_B0_D2 . . . . . . . . . . . . . .  C  ADDR  0546H
CI_B0_D3 . . . . . . . . . . . . . .  C  ADDR  04BDH
CI_B1_D0 . . . . . . . . . . . . . .  C  ADDR  06DCH
CI_B1_D1 . . . . . . . . . . . . . .  C  ADDR  0612H
CI_B1_D2 . . . . . . . . . . . . . .  C  ADDR  0554H
CI_B1_D3 . . . . . . . . . . . . . .  C  ADDR  04CBH
CI_B2_D0 . . . . . . . . . . . . . .  C  ADDR  06EAH
CI_B2_D1 . . . . . . . . . . . . . .  C  ADDR  0620H
CI_B2_D2 . . . . . . . . . . . . . .  C  ADDR  0562H
CI_B2_D3 . . . . . . . . . . . . . .  C  ADDR  04D9H
CI_B3_D0 . . . . . . . . . . . . . .  C  ADDR  06F8H
CI_B3_D1 . . . . . . . . . . . . . .  C  ADDR  062EH
CI_B3_D2 . . . . . . . . . . . . . .  C  ADDR  0570H
CI_B3_D3 . . . . . . . . . . . . . .  C  ADDR  04E7H
CI_B4_D0 . . . . . . . . . . . . . .  C  ADDR  0706H
CI_B4_D1 . . . . . . . . . . . . . .  C  ADDR  063CH
CI_B4_D2 . . . . . . . . . . . . . .  C  ADDR  057EH
CI_B4_D3 . . . . . . . . . . . . . .  C  ADDR  04F5H
CI_B5_D0 . . . . . . . . . . . . . .  C  ADDR  0714H
CI_B5_D1 . . . . . . . . . . . . . .  C  ADDR  064AH
CI_B5_D2 . . . . . . . . . . . . . .  C  ADDR  058CH
CI_B6_D0 . . . . . . . . . . . . . .  C  ADDR  0722H
CI_B6_D1 . . . . . . . . . . . . . .  C  ADDR  0658H
CI_B6_D2 . . . . . . . . . . . . . .  C  ADDR  059AH
CI_B7_D0 . . . . . . . . . . . . . .  C  ADDR  0730H
CI_B7_D1 . . . . . . . . . . . . . .  C  ADDR  0666H
CI_B7_D2 . . . . . . . . . . . . . .  C  ADDR  05A8H
CI_B8_D0 . . . . . . . . . . . . . .  C  ADDR  073EH
CI_B8_D1 . . . . . . . . . . . . . .  C  ADDR  0674H
CI_B8_D2 . . . . . . . . . . . . . .  C  ADDR  05B6H
CI_B9_D0 . . . . . . . . . . . . . .  C  ADDR  074CH
CI_B9_D1 . . . . . . . . . . . . . .  C  ADDR  0682H
CI_B9_D2 . . . . . . . . . . . . . .  C  ADDR  05C4H
CI_END . . . . . . . . . . . . . . .  C  ADDR  075AH
CKCON. . . . . . . . . . . . . . . .  D  ADDR  008FH  NOT USED
CKCON0 . . . . . . . . . . . . . . .  D  ADDR  008FH  NOT USED
CKRL . . . . . . . . . . . . . . . .  D  ADDR  0097H  NOT USED
CKSEL. . . . . . . . . . . . . . . .  D  ADDR  0085H  NOT USED
CL . . . . . . . . . . . . . . . . .  D  ADDR  00E9H  NOT USED
CLEAN_LCD. . . . . . . . . . . . . .  C  ADDR  0971H
CLK. . . . . . . . . . . . . . . . .  N  NUMB  0097H
CLKREG . . . . . . . . . . . . . . .  D  ADDR  008FH  NOT USED
CMOD . . . . . . . . . . . . . . . .  D  ADDR  00D9H  NOT USED
COILNUM. . . . . . . . . . . . . . .  N  NUMB  0080H  NOT USED
COIL_ADDR. . . . . . . . . . . . . .  N  NUMB  0020H  NOT USED
CONVERTEDDELAY . . . . . . . . . . .  C  ADDR  0B5CH
COUNTERMODBUS. . . . . . . . . . . .  N  NUMB  005BH
CPRL2. . . . . . . . . . . . . . . .  B  ADDR  00C8H  NOT USED
CR . . . . . . . . . . . . . . . . .  B  ADDR  00DEH  NOT USED
CRC. . . . . . . . . . . . . . . . .  N  NUMB  005EH
CRCLOOP. . . . . . . . . . . . . . .  C  ADDR  0BE7H
CRCPOLYNOM1WIRE. . . . . . . . . . .  N  NUMB  005DH
CRCREGISTER. . . . . . . . . . . . .  S  SPEC  A
CRCROMWRONG. . . . . . . . . . . . .  C  ADDR  029FH
CRCSCRATCHPADWRONG . . . . . . . . .  C  ADDR  02FEH
CRC_1WIRE_GENERATOR. . . . . . . . .  C  ADDR  0BDEH
CRC_ACCUM_HI . . . . . . . . . . . .  N  NUMB  000EH
CRC_ACCUM_LOW. . . . . . . . . . . .  N  NUMB  000DH
CRC_GENERATOR_MODBUS . . . . . . . .  C  ADDR  0B69H  NOT USED
CRC_MASK_LSB . . . . . . . . . . . .  N  NUMB  0001H
CRC_MASK_MSB . . . . . . . . . . . .  N  NUMB  00A0H
CS . . . . . . . . . . . . . . . . .  N  NUMB  00B5H
CSDA . . . . . . . . . . . . . . . .  N  NUMB  00B4H
CT2. . . . . . . . . . . . . . . . .  B  ADDR  00C9H  NOT USED
CY . . . . . . . . . . . . . . . . .  B  ADDR  00D7H  NOT USED
DAH. . . . . . . . . . . . . . . . .  N  NUMB  0042H
DAL. . . . . . . . . . . . . . . . .  N  NUMB  0043H
DATA_BANK. . . . . . . . . . . . . .  N  NUMB  003BH
DELAY_10MS . . . . . . . . . . . . .  C  ADDR  0356H
DELAY_MAX. . . . . . . . . . . . . .  C  ADDR  0343H
DERGO_PC . . . . . . . . . . . . . .  C  ADDR  00A1H
DERGO_PC0. . . . . . . . . . . . . .  C  ADDR  00C7H  NOT USED
DHJETESHET . . . . . . . . . . . . .  N  NUMB  003EH
DIS3_S . . . . . . . . . . . . . . .  C  ADDR  049DH
DISPLAY_LEXO_TEMP. . . . . . . . . .  C  ADDR  042FH
DISPLAY_MENU . . . . . . . . . . . .  C  ADDR  03A5H
DISPLAY_READ_AD. . . . . . . . . . .  C  ADDR  03F9H
DISPLAY_READ_AD0 . . . . . . . . . .  C  ADDR  0902H
DISPLAY_READ_AD1 . . . . . . . . . .  C  ADDR  0938H
DISPLAY_READ_DA. . . . . . . . . . .  C  ADDR  03C3H
DISPLAY_READ_GET_NUMBER. . . . . . .  C  ADDR  049BH
DISPLAY_READ_SHOW_AD . . . . . . . .  C  ADDR  0836H
DISPLAY_READ_SHOW_AD0. . . . . . . .  C  ADDR  0881H
DISPLAY_READ_SHOW_DA . . . . . . . .  C  ADDR  07EBH
DISPLAY_READ_SHOW_TEMP . . . . . . .  C  ADDR  08CCH
DISPLAY_STATUS . . . . . . . . . . .  N  NUMB  0019H
DISPLAY_WRITE_DA . . . . . . . . . .  C  ADDR  0465H
DIS_0. . . . . . . . . . . . . . . .  N  NUMB  0037H
DIS_1. . . . . . . . . . . . . . . .  N  NUMB  0038H
DIS_2. . . . . . . . . . . . . . . .  N  NUMB  0039H
DIS_3. . . . . . . . . . . . . . . .  N  NUMB  003AH
DIV1 . . . . . . . . . . . . . . . .  C  ADDR  0A1FH
DIV16. . . . . . . . . . . . . . . .  C  ADDR  0A17H
DIV2 . . . . . . . . . . . . . . . .  C  ADDR  0A29H
DIV3 . . . . . . . . . . . . . . . .  C  ADDR  0A40H
DP0H . . . . . . . . . . . . . . . .  D  ADDR  0083H  NOT USED
DP0L . . . . . . . . . . . . . . . .  D  ADDR  0082H  NOT USED
DP1H . . . . . . . . . . . . . . . .  D  ADDR  0085H  NOT USED
DP1L . . . . . . . . . . . . . . . .  D  ADDR  0084H  NOT USED
DPH. . . . . . . . . . . . . . . . .  D  ADDR  0083H  NOT USED
DPL. . . . . . . . . . . . . . . . .  D  ADDR  0082H  NOT USED
EA . . . . . . . . . . . . . . . . .  B  ADDR  00AFH  NOT USED
EC . . . . . . . . . . . . . . . . .  B  ADDR  00AEH  NOT USED
EECON. . . . . . . . . . . . . . . .  D  ADDR  0096H  NOT USED
END_7SEG_INT . . . . . . . . . . . .  C  ADDR  096EH
END_D00. . . . . . . . . . . . . . .  C  ADDR  03C0H
END_D01. . . . . . . . . . . . . . .  C  ADDR  03F6H
END_D010 . . . . . . . . . . . . . .  C  ADDR  096BH
END_D02. . . . . . . . . . . . . . .  C  ADDR  042CH
END_D03. . . . . . . . . . . . . . .  C  ADDR  0462H
END_D04. . . . . . . . . . . . . . .  C  ADDR  0498H
END_D06. . . . . . . . . . . . . . .  C  ADDR  0833H
END_D07. . . . . . . . . . . . . . .  C  ADDR  087EH
END_D08. . . . . . . . . . . . . . .  C  ADDR  08FFH
END_D09. . . . . . . . . . . . . . .  C  ADDR  0935H
END_D10. . . . . . . . . . . . . . .  C  ADDR  07E8H
END_D11. . . . . . . . . . . . . . .  C  ADDR  08C9H
ES . . . . . . . . . . . . . . . . .  B  ADDR  00ACH
ESC_D01. . . . . . . . . . . . . . .  C  ADDR  03EAH
ESC_D010 . . . . . . . . . . . . . .  C  ADDR  095FH
ESC_D02. . . . . . . . . . . . . . .  C  ADDR  0420H
ESC_D03. . . . . . . . . . . . . . .  C  ADDR  0456H
ESC_D04. . . . . . . . . . . . . . .  C  ADDR  048CH
ESC_D06. . . . . . . . . . . . . . .  C  ADDR  0824H
ESC_D07. . . . . . . . . . . . . . .  C  ADDR  086FH
ESC_D08. . . . . . . . . . . . . . .  C  ADDR  08F0H
ESC_D09. . . . . . . . . . . . . . .  C  ADDR  0929H
ESC_D10. . . . . . . . . . . . . . .  C  ADDR  07D4H
ESC_D11. . . . . . . . . . . . . . .  C  ADDR  08BAH
ET0. . . . . . . . . . . . . . . . .  B  ADDR  00A9H
ET1. . . . . . . . . . . . . . . . .  B  ADDR  00ABH
ET2. . . . . . . . . . . . . . . . .  B  ADDR  00ADH  NOT USED
EX0. . . . . . . . . . . . . . . . .  B  ADDR  00A8H  NOT USED
EX1. . . . . . . . . . . . . . . . .  B  ADDR  00AAH  NOT USED
EXEN2. . . . . . . . . . . . . . . .  B  ADDR  00CBH  NOT USED
EXF2 . . . . . . . . . . . . . . . .  B  ADDR  00CEH  NOT USED
EXTI0. . . . . . . . . . . . . . . .  C  ADDR  0003H  NOT USED
EXTI1. . . . . . . . . . . . . . . .  C  ADDR  0013H  NOT USED
F0 . . . . . . . . . . . . . . . . .  B  ADDR  00D5H  NOT USED
FE . . . . . . . . . . . . . . . . .  B  ADDR  009FH  NOT USED
FO16 . . . . . . . . . . . . . . . .  C  ADDR  0E1BH  NOT USED
FO16_01. . . . . . . . . . . . . . .  C  ADDR  0E22H
FO16_02. . . . . . . . . . . . . . .  C  ADDR  0E2DH
FO16_03. . . . . . . . . . . . . . .  C  ADDR  0E34H
FO16_04. . . . . . . . . . . . . . .  C  ADDR  0E41H
FO3. . . . . . . . . . . . . . . . .  C  ADDR  0DC9H
FO3_01 . . . . . . . . . . . . . . .  C  ADDR  0DD0H
FO3_02 . . . . . . . . . . . . . . .  C  ADDR  0DDBH
FO3_03 . . . . . . . . . . . . . . .  C  ADDR  0DE2H
FO3_04 . . . . . . . . . . . . . . .  C  ADDR  0DEFH
FO4. . . . . . . . . . . . . . . . .  C  ADDR  0DFBH  NOT USED
FO6. . . . . . . . . . . . . . . . .  C  ADDR  0E01H  NOT USED
FO6_E1 . . . . . . . . . . . . . . .  C  ADDR  0E15H
FUNKS. . . . . . . . . . . . . . . .  C  ADDR  0DC3H
GJENDJADERGIMIT. . . . . . . . . . .  N  NUMB  0059H
GJENDJAMODBUS. . . . . . . . . . . .  N  NUMB  005AH
HL1. . . . . . . . . . . . . . . . .  C  ADDR  0A7AH
HREGNUM. . . . . . . . . . . . . . .  N  NUMB  0020H
HREG_ADDR. . . . . . . . . . . . . .  N  NUMB  0020H  NOT USED
IE . . . . . . . . . . . . . . . . .  D  ADDR  00A8H
IE0. . . . . . . . . . . . . . . . .  B  ADDR  0089H  NOT USED
IE1. . . . . . . . . . . . . . . . .  B  ADDR  008BH  NOT USED
INC_400. . . . . . . . . . . . . . .  C  ADDR  032FH
INPNUM . . . . . . . . . . . . . . .  N  NUMB  0080H  NOT USED
INP_ADDR . . . . . . . . . . . . . .  N  NUMB  0020H  NOT USED
INT0 . . . . . . . . . . . . . . . .  B  ADDR  00B2H  NOT USED
INT1 . . . . . . . . . . . . . . . .  B  ADDR  00B3H  NOT USED
INTERRUPT_7SEG . . . . . . . . . . .  C  ADDR  0368H
IP . . . . . . . . . . . . . . . . .  D  ADDR  00B8H  NOT USED
IPH. . . . . . . . . . . . . . . . .  D  ADDR  00B7H  NOT USED
IPH0 . . . . . . . . . . . . . . . .  D  ADDR  00B7H  NOT USED
IPH1 . . . . . . . . . . . . . . . .  D  ADDR  00B3H  NOT USED
IPL0 . . . . . . . . . . . . . . . .  D  ADDR  00B8H  NOT USED
IPL1 . . . . . . . . . . . . . . . .  D  ADDR  00B2H  NOT USED
IREGNUM. . . . . . . . . . . . . . .  N  NUMB  0020H  NOT USED
IREG_ADDR. . . . . . . . . . . . . .  N  NUMB  0020H  NOT USED
IT0. . . . . . . . . . . . . . . . .  B  ADDR  0088H  NOT USED
IT1. . . . . . . . . . . . . . . . .  B  ADDR  008AH  NOT USED
JOFO16 . . . . . . . . . . . . . . .  C  ADDR  0E4AH
JOFO3. . . . . . . . . . . . . . . .  C  ADDR  0DF8H
JOFO4. . . . . . . . . . . . . . . .  C  ADDR  0DFEH
JOFO6. . . . . . . . . . . . . . . .  C  ADDR  0E18H
KANALI . . . . . . . . . . . . . . .  N  NUMB  0057H  NOT USED
KBE. . . . . . . . . . . . . . . . .  D  ADDR  009DH  NOT USED
KBF. . . . . . . . . . . . . . . . .  D  ADDR  009EH  NOT USED
KBLS . . . . . . . . . . . . . . . .  D  ADDR  009CH  NOT USED
KSS. . . . . . . . . . . . . . . . .  C  ADDR  0C74H
L1 . . . . . . . . . . . . . . . . .  C  ADDR  0B62H
L2 . . . . . . . . . . . . . . . . .  C  ADDR  0B60H
L3 . . . . . . . . . . . . . . . . .  C  ADDR  0B5EH
LEXO_TEMP. . . . . . . . . . . . . .  C  ADDR  0290H
LOOP2. . . . . . . . . . . . . . . .  C  ADDR  0A85H
MAIN . . . . . . . . . . . . . . . .  C  ADDR  0030H
MAKELONG_CI_B8_D1. . . . . . . . . .  C  ADDR  05FEH
MAKELONG_CI_B8_D2. . . . . . . . . .  C  ADDR  0540H
MAKELONG_CI_B9_D0. . . . . . . . . .  C  ADDR  06CBH
MAKELONG_CI_B9_D1. . . . . . . . . .  C  ADDR  0601H
MAKELONG_CI_B9_D2. . . . . . . . . .  C  ADDR  0543H
MATCHROM . . . . . . . . . . . . . .  C  ADDR  0AFAH
MAT_VLERAT . . . . . . . . . . . . .  C  ADDR  0094H
MIJESHET . . . . . . . . . . . . . .  N  NUMB  003CH
N7SEGTAB . . . . . . . . . . . . . .  C  ADDR  0A52H  NOT USED
NEGATIVE . . . . . . . . . . . . . .  C  ADDR  0C32H
NEXTCH . . . . . . . . . . . . . . .  C  ADDR  0D20H
NEXT_DIS0_CI . . . . . . . . . . . .  C  ADDR  0690H
NEXT_DIS1_CI . . . . . . . . . . . .  C  ADDR  05D2H
NEXT_DIS2_CI . . . . . . . . . . . .  C  ADDR  0503H
NJESHET. . . . . . . . . . . . . . .  N  NUMB  003FH
NUMBER_TO_7SEG . . . . . . . . . . .  C  ADDR  0A4FH
OK_D01 . . . . . . . . . . . . . . .  C  ADDR  03DEH
OK_D010. . . . . . . . . . . . . . .  C  ADDR  0953H
OK_D02 . . . . . . . . . . . . . . .  C  ADDR  0414H
OK_D03 . . . . . . . . . . . . . . .  C  ADDR  044AH
OK_D04 . . . . . . . . . . . . . . .  C  ADDR  0480H
OK_D06 . . . . . . . . . . . . . . .  C  ADDR  0815H
OK_D07 . . . . . . . . . . . . . . .  C  ADDR  0860H
OK_D08 . . . . . . . . . . . . . . .  C  ADDR  08E1H
OK_D09 . . . . . . . . . . . . . . .  C  ADDR  091DH
OK_D10 . . . . . . . . . . . . . . .  C  ADDR  07C0H
OK_D11 . . . . . . . . . . . . . . .  C  ADDR  08ABH
OSCCON . . . . . . . . . . . . . . .  D  ADDR  0086H  NOT USED
OV . . . . . . . . . . . . . . . . .  B  ADDR  00D2H  NOT USED
P. . . . . . . . . . . . . . . . . .  B  ADDR  00D0H  NOT USED
P0 . . . . . . . . . . . . . . . . .  D  ADDR  0080H
P1 . . . . . . . . . . . . . . . . .  D  ADDR  0090H
P1M1 . . . . . . . . . . . . . . . .  D  ADDR  00D4H  NOT USED
P1M2 . . . . . . . . . . . . . . . .  D  ADDR  00E2H  NOT USED
P1_END . . . . . . . . . . . . . . .  C  ADDR  09E4H
P1_GJ00. . . . . . . . . . . . . . .  C  ADDR  09ACH
P1_GJ01. . . . . . . . . . . . . . .  C  ADDR  09BAH
P1_GJ02. . . . . . . . . . . . . . .  C  ADDR  09C8H
P1_GJ03. . . . . . . . . . . . . . .  C  ADDR  09D6H
P1_GJP . . . . . . . . . . . . . . .  N  NUMB  0056H
P1_GJT . . . . . . . . . . . . . . .  N  NUMB  0055H
P2 . . . . . . . . . . . . . . . . .  D  ADDR  00A0H
P3 . . . . . . . . . . . . . . . . .  D  ADDR  00B0H  NOT USED
P3M1 . . . . . . . . . . . . . . . .  D  ADDR  00D5H  NOT USED
P3M2 . . . . . . . . . . . . . . . .  D  ADDR  00E3H  NOT USED
P4 . . . . . . . . . . . . . . . . .  D  ADDR  00C0H  NOT USED
P4M1 . . . . . . . . . . . . . . . .  D  ADDR  00D6H  NOT USED
P4M2 . . . . . . . . . . . . . . . .  D  ADDR  00E4H  NOT USED
P5 . . . . . . . . . . . . . . . . .  D  ADDR  00E8H  NOT USED
PC . . . . . . . . . . . . . . . . .  B  ADDR  00BEH  NOT USED
PCON . . . . . . . . . . . . . . . .  D  ADDR  0087H  NOT USED
PMR_00 . . . . . . . . . . . . . . .  C  ADDR  0F15H
PPCL . . . . . . . . . . . . . . . .  B  ADDR  00BEH  NOT USED
PRAPA. . . . . . . . . . . . . . . .  C  ADDR  00ABH
PRAPA0 . . . . . . . . . . . . . . .  C  ADDR  00D1H
PRESMREG . . . . . . . . . . . . . .  C  ADDR  0F0BH
PRESREG. . . . . . . . . . . . . . .  C  ADDR  0ED3H
PROGRAM. . . . . . . . . . . . . . .  C  ADDR  0090H
PS . . . . . . . . . . . . . . . . .  B  ADDR  00BCH  NOT USED
PSL. . . . . . . . . . . . . . . . .  B  ADDR  00BCH  NOT USED
PSW. . . . . . . . . . . . . . . . .  D  ADDR  00D0H
PT0. . . . . . . . . . . . . . . . .  B  ADDR  00B9H  NOT USED
PT0L . . . . . . . . . . . . . . . .  B  ADDR  00B9H  NOT USED
PT1. . . . . . . . . . . . . . . . .  B  ADDR  00BBH  NOT USED
PT1L . . . . . . . . . . . . . . . .  B  ADDR  00BBH  NOT USED
PT2. . . . . . . . . . . . . . . . .  B  ADDR  00BDH  NOT USED
PT2L . . . . . . . . . . . . . . . .  B  ADDR  00BDH  NOT USED
PX0. . . . . . . . . . . . . . . . .  B  ADDR  00B8H  NOT USED
PX0L . . . . . . . . . . . . . . . .  B  ADDR  00B8H  NOT USED
PX1. . . . . . . . . . . . . . . . .  B  ADDR  00BAH  NOT USED
PX1L . . . . . . . . . . . . . . . .  B  ADDR  00BAH  NOT USED
QINDESHET. . . . . . . . . . . . . .  N  NUMB  003DH
RB8. . . . . . . . . . . . . . . . .  B  ADDR  009AH  NOT USED
RCAP2H . . . . . . . . . . . . . . .  D  ADDR  00CBH
RCAP2L . . . . . . . . . . . . . . .  D  ADDR  00CAH
RCLK . . . . . . . . . . . . . . . .  B  ADDR  00CDH  NOT USED
RD . . . . . . . . . . . . . . . . .  B  ADDR  00B7H  NOT USED
READREG. . . . . . . . . . . . . . .  C  ADDR  0EE5H
READROMFROMSLAVE . . . . . . . . . .  C  ADDR  0AACH
READ_AD. . . . . . . . . . . . . . .  C  ADDR  0166H
READ_AD0 . . . . . . . . . . . . . .  C  ADDR  01FBH
READ_BIT . . . . . . . . . . . . . .  C  ADDR  0AE0H
READ_BYTE. . . . . . . . . . . . . .  C  ADDR  0AD5H
REN. . . . . . . . . . . . . . . . .  B  ADDR  009CH  NOT USED
RESET. . . . . . . . . . . . . . . .  C  ADDR  0000H  NOT USED
RI . . . . . . . . . . . . . . . . .  B  ADDR  0098H
RR_00. . . . . . . . . . . . . . . .  C  ADDR  0EFBH
RS0. . . . . . . . . . . . . . . . .  B  ADDR  00D3H
RS1. . . . . . . . . . . . . . . . .  B  ADDR  00D4H  NOT USED
RUTINADIS0 . . . . . . . . . . . . .  C  ADDR  0C25H
RUTINADIS2 . . . . . . . . . . . . .  C  ADDR  0C80H
RUTINADIS2NEGATIVE . . . . . . . . .  C  ADDR  0C61H  NOT USED
RUTINADIS3POZITIVE . . . . . . . . .  C  ADDR  0C6EH
RX . . . . . . . . . . . . . . . . .  C  ADDR  0D38H
RXD. . . . . . . . . . . . . . . . .  B  ADDR  00B0H  NOT USED
RXGJ2. . . . . . . . . . . . . . . .  C  ADDR  0D58H
RXJO1. . . . . . . . . . . . . . . .  C  ADDR  0D52H
RXJO2. . . . . . . . . . . . . . . .  C  ADDR  0D80H
RXJO3. . . . . . . . . . . . . . . .  C  ADDR  0D85H
RXJO4. . . . . . . . . . . . . . . .  C  ADDR  0D97H
SADDR. . . . . . . . . . . . . . . .  D  ADDR  00A9H  NOT USED
SADDR_0. . . . . . . . . . . . . . .  D  ADDR  00A9H  NOT USED
SADDR_1. . . . . . . . . . . . . . .  D  ADDR  00AAH  NOT USED
SADEN. . . . . . . . . . . . . . . .  D  ADDR  00B9H  NOT USED
SADEN_0. . . . . . . . . . . . . . .  D  ADDR  00B9H  NOT USED
SADEN_1. . . . . . . . . . . . . . .  D  ADDR  00BAH  NOT USED
SBUF . . . . . . . . . . . . . . . .  D  ADDR  0099H
SCON . . . . . . . . . . . . . . . .  D  ADDR  0098H
SCRATCHPADREAD . . . . . . . . . . .  C  ADDR  0B28H
SDI. . . . . . . . . . . . . . . . .  N  NUMB  0095H
SDO. . . . . . . . . . . . . . . . .  N  NUMB  0096H
SENDMSG. . . . . . . . . . . . . . .  C  ADDR  0E81H
SENDMSG1 . . . . . . . . . . . . . .  C  ADDR  0E9BH
SERVEC . . . . . . . . . . . . . . .  C  ADDR  0CF7H
SHAREMEMORY. . . . . . . . . . . . .  N  NUMB  0020H
SHORT1 . . . . . . . . . . . . . . .  C  ADDR  0A7FH
SHOW_7SEG. . . . . . . . . . . . . .  C  ADDR  0994H
SHOW_V4096 . . . . . . . . . . . . .  C  ADDR  09E5H
SINT . . . . . . . . . . . . . . . .  C  ADDR  0023H  NOT USED
SM0. . . . . . . . . . . . . . . . .  B  ADDR  009FH  NOT USED
SM1. . . . . . . . . . . . . . . . .  B  ADDR  009EH  NOT USED
SM2. . . . . . . . . . . . . . . . .  B  ADDR  009DH  NOT USED
SP . . . . . . . . . . . . . . . . .  D  ADDR  0081H
SPCON. . . . . . . . . . . . . . . .  D  ADDR  00C3H  NOT USED
SPCR . . . . . . . . . . . . . . . .  D  ADDR  00D5H  NOT USED
SPDAT. . . . . . . . . . . . . . . .  D  ADDR  00C5H  NOT USED
SPDR . . . . . . . . . . . . . . . .  D  ADDR  0086H  NOT USED
SPSR . . . . . . . . . . . . . . . .  D  ADDR  00AAH  NOT USED
SPSTA. . . . . . . . . . . . . . . .  D  ADDR  00C4H  NOT USED
STADDERR . . . . . . . . . . . . . .  C  ADDR  0E6FH
STARTADDRESS . . . . . . . . . . . .  N  NUMB  0070H
T0 . . . . . . . . . . . . . . . . .  B  ADDR  00B4H  NOT USED
T1 . . . . . . . . . . . . . . . . .  B  ADDR  00B5H  NOT USED
T15. . . . . . . . . . . . . . . . .  N  NUMB  F949H
T20. . . . . . . . . . . . . . . . .  N  NUMB  3C06H
T2CON. . . . . . . . . . . . . . . .  D  ADDR  00C8H
T2MOD. . . . . . . . . . . . . . . .  D  ADDR  00C9H  NOT USED
T35. . . . . . . . . . . . . . . . .  N  NUMB  F056H
TABPROC. . . . . . . . . . . . . . .  C  ADDR  099CH
TAB_STATUS . . . . . . . . . . . . .  C  ADDR  0372H
TB8. . . . . . . . . . . . . . . . .  B  ADDR  009BH  NOT USED
TCLK . . . . . . . . . . . . . . . .  B  ADDR  00CCH  NOT USED
TCON . . . . . . . . . . . . . . . .  D  ADDR  0088H  NOT USED
TEMP . . . . . . . . . . . . . . . .  N  NUMB  0046H
TEMP_TO_7SEGMENT . . . . . . . . . .  C  ADDR  0C02H
TF0. . . . . . . . . . . . . . . . .  B  ADDR  008DH
TF1. . . . . . . . . . . . . . . . .  B  ADDR  008FH  NOT USED
TF2. . . . . . . . . . . . . . . . .  B  ADDR  00CFH  NOT USED
TH0. . . . . . . . . . . . . . . . .  D  ADDR  008CH
TH1. . . . . . . . . . . . . . . . .  D  ADDR  008DH
TH2. . . . . . . . . . . . . . . . .  D  ADDR  00CDH  NOT USED
THRESET. . . . . . . . . . . . . . .  C  ADDR  0A5CH
THWRITE. . . . . . . . . . . . . . .  C  ADDR  0A80H
TI . . . . . . . . . . . . . . . . .  B  ADDR  0099H
TIMER0 . . . . . . . . . . . . . . .  C  ADDR  000BH  NOT USED
TIMER1 . . . . . . . . . . . . . . .  C  ADDR  001BH  NOT USED
TIMER2 . . . . . . . . . . . . . . .  C  ADDR  002BH  NOT USED
TL0. . . . . . . . . . . . . . . . .  D  ADDR  008AH
TL1. . . . . . . . . . . . . . . . .  D  ADDR  008BH  NOT USED
TL2. . . . . . . . . . . . . . . . .  D  ADDR  00CCH  NOT USED
TMOD . . . . . . . . . . . . . . . .  D  ADDR  0089H
TMR0VEC. . . . . . . . . . . . . . .  C  ADDR  0C9CH
TOJO1. . . . . . . . . . . . . . . .  C  ADDR  0CB1H
TOJO2. . . . . . . . . . . . . . . .  C  ADDR  0CB1H  NOT USED
TOJO3. . . . . . . . . . . . . . . .  C  ADDR  0CC8H
TOJO4. . . . . . . . . . . . . . . .  C  ADDR  0CF2H
TR0. . . . . . . . . . . . . . . . .  B  ADDR  008CH
TR1. . . . . . . . . . . . . . . . .  B  ADDR  008EH
TR2. . . . . . . . . . . . . . . . .  B  ADDR  00CAH
TXD. . . . . . . . . . . . . . . . .  B  ADDR  00B1H  NOT USED
U1 . . . . . . . . . . . . . . . . .  C  ADDR  0AD9H
VALERR . . . . . . . . . . . . . . .  C  ADDR  0E5DH
VLERA7SEG. . . . . . . . . . . . . .  N  NUMB  0041H
VLERA7SEGH . . . . . . . . . . . . .  N  NUMB  0040H
VONESA . . . . . . . . . . . . . . .  C  ADDR  0AA8H
WAITL1 . . . . . . . . . . . . . . .  C  ADDR  0A6CH
WDTCON . . . . . . . . . . . . . . .  D  ADDR  00A7H  NOT USED
WDTPRG . . . . . . . . . . . . . . .  D  ADDR  00A7H  NOT USED
WDTRST . . . . . . . . . . . . . . .  D  ADDR  00A6H  NOT USED
WH1. . . . . . . . . . . . . . . . .  C  ADDR  0A77H
WR . . . . . . . . . . . . . . . . .  B  ADDR  00B6H  NOT USED
WRITE_DA . . . . . . . . . . . . . .  C  ADDR  00EDH
W_END2 . . . . . . . . . . . . . . .  C  ADDR  07A9H
ZERO . . . . . . . . . . . . . . . .  C  ADDR  0BF0H
ZEROO. . . . . . . . . . . . . . . .  C  ADDR  0C2DH
ZEROO0 . . . . . . . . . . . . . . .  C  ADDR  0C54H
ZZZ. . . . . . . . . . . . . . . . .  C  ADDR  0C8AH  NOT USED
ZZZ1 . . . . . . . . . . . . . . . .  C  ADDR  0C90H
ZZZ2 . . . . . . . . . . . . . . . .  C  ADDR  0C65H  NOT USED